<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>IP Addressing with References (IPREF)</title>
<meta content="Waldemar Augustyn" name="author">
<meta content="
       IP addressing with references, or IPREF for short, is a method for end-to-end
        communication across different address spaces normally not reachable through native
        means. IPREF uses references to addresses instead of real addresses. It allows to
        reach across NAT/NAT6 and across protocols IPv4/IPv6. It is a pure layer 3 addressing
        feature that works with existing network protocols.
       
       IPREF forms addresses made of context addresses and references. These addresses are
        publishable in Domain Name System (DNS). Any host in any address space, including
        behind NAT/NAT6 or employing different protocol IPv4/IPv6, may publish its services
        in DNS. These services will be reachable from any address space, including those
        running different protocol IPv4/IPv6 or behind NAT/NAT6, provided both ends support
        IPREF.
       
       IPREF is especially useful for transitioning to IPv6.
       
    " name="description">
<meta content="xml2rfc 3.18.0" name="generator">
<meta content="IPREF" name="keyword">
<meta content="draft-augustyn-intarea-ipref-02" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.18.0
    Python 3.10.12
    ConfigArgParse 1.7
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.3
    platformdirs 3.10.0
    pycountry 22.3.5
    PyYAML 6.0.1
    requests 2.31.0
    setuptools 59.6.0
    six 1.16.0
    wcwidth 0.2.6
    weasyprint 59.0
-->
<link href="/usr/src/app/tmp/614fc226-294e-405d-beeb-5d11d17c78f0/draft-augustyn-intarea-ipref-02.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef,
.iref + a[href].internal {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body class="xml2rfc">
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">IP Addressing with References (IPREF)</td>
<td class="right">September 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Augustyn</td>
<td class="center">Expires 28 March 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Internet Engineering Task Force</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-augustyn-intarea-ipref-02</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2023-09-25" class="published">25 September 2023</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-03-28">28 March 2024</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">W. Augustyn, <span class="editor">Ed.</span>
</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">IP Addressing with References (IPREF)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">IP addressing with references, or IPREF for short, is a method for end-to-end
        communication across different address spaces normally not reachable through native
        means. IPREF uses references to addresses instead of real addresses. It allows to
        reach across NAT/NAT6 and across protocols IPv4/IPv6. It is a pure layer 3 addressing
        feature that works with existing network protocols.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">IPREF forms addresses made of context addresses and references. These addresses are
        publishable in Domain Name System (DNS). Any host in any address space, including
        behind NAT/NAT6 or employing different protocol IPv4/IPv6, may publish its services
        in DNS. These services will be reachable from any address space, including those
        running different protocol IPv4/IPv6 or behind NAT/NAT6, provided both ends support
        IPREF.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
<p id="section-abstract-3">IPREF is especially useful for transitioning to IPv6.<a href="#section-abstract-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 28 March 2024.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-requirements-language" class="internal xref">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-ipref-terminology" class="internal xref">IPREF Terminology</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-ipref-overview" class="internal xref">IPREF Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-references" class="internal xref">References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-ipref-addresses" class="internal xref">IPREF Addresses</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="auto internal xref">2.3</a>.  <a href="#name-gateways-and-encoding-netwo" class="internal xref">Gateways and Encoding Networks</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="auto internal xref">2.4</a>.  <a href="#name-traversing-address-spaces" class="internal xref">Traversing Address Spaces</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="auto internal xref">2.5</a>.  <a href="#name-traversing-address-spaces-i" class="internal xref">Traversing Address Spaces in Detail</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6">
                <p id="section-toc.1-1.2.2.6.1"><a href="#section-2.6" class="auto internal xref">2.6</a>.  <a href="#name-embedding-references-in-ip-" class="internal xref">Embedding References in IP Packets</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6.2.1">
                    <p id="section-toc.1-1.2.2.6.2.1.1"><a href="#section-2.6.1" class="auto internal xref">2.6.1</a>.  <a href="#name-ipv4-option" class="internal xref">IPv4 Option</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6.2.2">
                    <p id="section-toc.1-1.2.2.6.2.2.1"><a href="#section-2.6.2" class="auto internal xref">2.6.2</a>.  <a href="#name-ipv6-extension-header" class="internal xref">IPv6 Extension Header</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6.2.3">
                    <p id="section-toc.1-1.2.2.6.2.3.1"><a href="#section-2.6.3" class="auto internal xref">2.6.3</a>.  <a href="#name-udp-tunnel" class="internal xref">UDP Tunnel</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.7">
                <p id="section-toc.1-1.2.2.7.1"><a href="#section-2.7" class="auto internal xref">2.7</a>.  <a href="#name-name-resolution-support" class="internal xref">Name Resolution Support</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-dns-with-ipref" class="internal xref">DNS with IPREF</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-dns-records" class="internal xref">DNS Records</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-local-network-resolvers" class="internal xref">Local Network Resolvers</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-detecting-published-ipref-a" class="internal xref">Detecting Published IPREF Addresses</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.  <a href="#name-dnssec-compatibility" class="internal xref">DNSSEC compatibility</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="auto internal xref">3.5</a>.  <a href="#name-ipref-address-literals" class="internal xref">IPREF Address Literals</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-using-ipref-for-transitioni" class="internal xref">Using IPREF for Transitioning to IPv6</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-transitioning-process" class="internal xref">Transitioning Process</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-related-technologies" class="internal xref">Related Technologies</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-references-2" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Some 25 years ago, it became clear that the 32 bit address space of the IP protocol
        was too small for the growing Internet. An effort to avert the impending 'shortage
        of IP addressees', as the problem was referred to at the time, led to development of
        a new IP protocol named version 6. That protocol, referred to as IPv6, had a larger
        address space thus instantaneously solving the problem. Unfortunately, it created
        another problem. It operated in a different, incompatible address space than the
        existing IP protocol, referred to since as IPv4. In this way, two different address
        spaces, inaccessible to each other, have been created.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Meanwhile, a grass roots effort led to development of another solution to the 'shortage
        of IP addresses' problem that was compatible with existing IPv4 protocol. IPv4 address
        space was extended by rewriting network addresses. That technique, since widely known as
        NAT, effectively created an address space hierarchy. At the top of the hierarchy, there
        was the original 32 bit address space. These addresses, at the edge of hierarchy, were
        translated into and from another set of addresses belonging to so called 'private ranges'.
        These addresses formed new address spaces. They were 32 bit wide but only 24 bit subsets
        were used in practice. Together with the top hierarchy, they produced a 56 bit address
        space for IPv4. Another variant, known as 'carrier grade NAT', added another level of
        hierarchy which extend total address space to 72 bits. This approach averted the shortage
        of IP addresses, but it achieved it at a cost of creating another problem. Namely, it
        created millions of address spaces inaccessible to one another. These new address spaces
        were not equal value, they were mostly useful for clients accessing servers within their
        own address spaces or within the space at the top of the hierarchy, commonly referred to
        as 'global IP addresses'.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">As a result, the Internet evolved into a collection of a large number of generally
        inaccessible address spaces with two incompatible network protocols.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">There were attempts at improving the situation which went in two directions. There
        were attempts aiming to solve access across address spaces within the same protocol,
        typically referred to as 'NAT traversal solutions', and there were attempts aiming to
        bridge IPv4/IPv6 divide. All of these attempts resulted in partial solutions with
        substantial limitations. We could call them nicely 'focused'. The ones dealing with
        IPv4/IPv6, like NAT64/SIIT, were asymmetrical, worked differently in one direction
        than the other, didn't scale well, required global IPv4 addresses, couldn't traverse
        NAT. The ones dealing with NAT traversal, like STUN or NAT-T collection, didn't work
        across protocols IPv4/IPv6, were very limited, dealing mostly with port manipulation,
        never truly solving NAT traversal.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">The result of these attempts was a hodgepodge of limited, mostly lacking, poorly
        scaling, half measures which left these millions of different address spaces still
        generally inaccessible to one another.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">A closer analysis of these different solutions reveals they suffer great difficulties
        primarily because they try to render necessary address transformations too early. IPREF
        takes a different approach. It is based on the observation that the originating hosts
        do not have to know what the destination addresses are, or what protocol they belong
        to. Thus, IPREF uses references to addresses rather than real addresses. This approach
        works for both NAT traversal as well as for protocol traversal since both problems are
        substantially the same. The one difference being having to repackage packets on the
        IPv4/IPv6 boundary. Such repackaging requires sufficient compatibility between the
        protocols which fortunately exists.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">With this approach, IPREF does not need to negotiate anything. It does not need any
        external devices, any shared configurations. It does not require allocating of any
        global IP addresses. The result is a highly scalable solution that works over NAT,
        NAT6, filters, and across IPv4/IPv6. All of the millions of different address spaces,
        whether behind NAT/NAT6, or across IPv4/IPv6 may now communicate with one another
        using IPREF.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">In the background to all the above, there is an ongoing effort to covert every IPv4
        network out there to IPv6. The idea is to run only one protocol everywhere which
        would simplify many issues including address space accessibility. This is a long term
        effort, decades away. IPREF does not conflict with it. Rather, it provides an
        excellent tool in achieving the objective. It does this in a least expensive, least
        risky manner which also shortens the conversion time substantially. Compared to
        traditional strategies, which use dual stacks and translator devices all requiring
        allocation of IPv4 addresses, IPREF allows very clean strategies without IPv4 pollution.
        It relies only on pure IPv6 Internet, allows to drop IPv4 Internet early, and transitions
        to pure IPv6 networks in a single step.<a href="#section-1-8" class="pilcrow">¶</a></p>
<div id="requirements">
<section id="section-1.1">
        <h3 id="name-requirements-language">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
          "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT
          RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be
          interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span>
          <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they appear in
          all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-1.2">
        <h3 id="name-ipref-terminology">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-ipref-terminology" class="section-name selfRef">IPREF Terminology</a>
        </h3>
<p id="section-1.2-1">IPREF - short name referring to technology described in this document, pronounced I-P-REF<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2">context address - a native address component of an IPREF address<a href="#section-1.2-2" class="pilcrow">¶</a></p>
<p id="section-1.2-3">reference - an unsigned integer component of an IPREF address<a href="#section-1.2-3" class="pilcrow">¶</a></p>
<p id="section-1.2-4">IPREF address - addressing unit used with IPREF, a combination of a context address and a reference<a href="#section-1.2-4" class="pilcrow">¶</a></p>
<p id="section-1.2-5">encoding network - network representing IPREF addresses in native form<a href="#section-1.2-5" class="pilcrow">¶</a></p>
<p id="section-1.2-6">IPREF gateway - a device, or software component, that performs IPREF address rewriting<a href="#section-1.2-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<section id="section-2">
      <h2 id="name-ipref-overview">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-ipref-overview" class="section-name selfRef">IPREF Overview</a>
      </h2>
<p id="section-2-1">IPREF is a method for communication across different address spaces, that is those
        that cannot be reached through native means of a network protocol. Examples of such
        address spaces are networks behind NAT, NAT6, or filters, as well as networks employing
        different network protocols such as IPv4/IPv6.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">Key characteristics of IPREF:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-3.1">massively scalable<a href="#section-2-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.2">cross protocol, cross address space (such as NAT/NAT6)<a href="#section-2-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.3">strictly layer 3 (no port manipulation, all ports available)<a href="#section-2-3.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.4">addresses publishable in DNS<a href="#section-2-3.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.5">no need for external translators or shared configurations<a href="#section-2-3.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-3.6">no need for global IPv4 addresses<a href="#section-2-3.6" class="pilcrow">¶</a>
</li>
      </ul>
<section id="section-2.1">
        <h3 id="name-references">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-references" class="section-name selfRef">References</a>
        </h3>
<p id="section-2.1-1">A common problem with cross address space communication is to decide how to deal with
          addressing. Communicating peers cannot interpret each other's addresses therefore some
          other method of directing packets to proper destinations must be devised.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">IPREF solves this problem by using references to addresses rather than actual
          addresses. The references are then evaluated within each address space to render proper
          native addresses suitable for forwarding. The evaluation is performed at each address
          space independently. As a result the same references render different addresses at
          different address spaces.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3">References are unsigned integers meaningful only in the context of the address space
          they pertain to. Local administrators allocate values to references and assign their
          meaning. They may divide a reference into fields for any purpose believed useful. For
          example, the fields may reflect different sources of allocations, or provide extra
          security bits, or provide load balancing hints, etc. Peers are unaware of these fields
          and treat references as opaque values.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2">
        <h3 id="name-ipref-addresses">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-ipref-addresses" class="section-name selfRef">IPREF Addresses</a>
        </h3>
<p id="section-2.2-1">IPREF uses references to addresses in lieu of actual addresses. Such references need
          context to be meaningful, therefore IPREF uses addressing units that combine a context
          address, which MUST be a native address, and a reference. These addressing units are
          called IPREF addresses.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<span id="name-ipref-address"></span><div id="ipref-address">
<figure id="figure-1">
          <div class="alignLeft art-ascii-art art-text artwork" id="section-2.2-2.1">
<pre>
         ┌───────────────────┬───────────────────┐
         │  context address  │     reference     │
         └───────────────────┴───────────────────┘
               198.51.100.11 + 700
            2001:db8::abc:11 + 700
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-ipref-address" class="selfRef">IPREF address</a>
          </figcaption></figure>
</div>
<p id="section-2.2-3">The context address portion of an IPREF address is an address within adjacent address
          space. Typically, this is the Internet, so this is usually an Internet address of an
          edge router of the source or destination network. Other addresses known to the network
          may also be used.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<p id="section-2.2-4">References are allocated by administrators of respective address spaces. The references
          may only refer to hosts from these address spaces. Thus, the destination references are
          allocated by the administrators of the destination networks while the source references
          are allocated by the administrators of the source networks. There are no conflicts and
          there is no need for negotiations. Each peer defines their own references and accepts
          peer references as opaque values.<a href="#section-2.2-4" class="pilcrow">¶</a></p>
<p id="section-2.2-5"><a href="#ipref-address" class="auto internal xref">Figure 1</a> shows two examples of IPREF addresses. In the notation,
          a plus sign '+' separates context address from the reference. A packet carries two
          IPREF addresses: a source IPREF address and a destination IPREF address.<a href="#section-2.2-5" class="pilcrow">¶</a></p>
<p id="section-2.2-6">IPREF addresses are publishable in DNS.<a href="#section-2.2-6" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3">
        <h3 id="name-gateways-and-encoding-netwo">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-gateways-and-encoding-netwo" class="section-name selfRef">Gateways and Encoding Networks</a>
        </h3>
<p id="section-2.3-1">IPREF addresses are placed in packets by gateways. The gateways must be installed at
          each address space participating in IPREF communication. Intermediate address spaces,
          such as the Internet, don't need gateways.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">The gateways inject and remove IPREF addresses as packets leave and enter local
          networks. They also encode IPREF addresses for internal use as local network protocols
          only understand native addresses. The encoding networks are local private networks to
          which the gateways map IPREF addresses. For example, IPv4 networks could use a 10/8
          network while IPv6 networks could use an fd::/64 network for the purpose. For local
          hosts, these encoded addresses represent peers they communicate with. The peers appear
          as if on the local network. This is common with cross protocol communication or more
          generally with cross address space communication. The gateways replace these encoded
          addresses with IPREF addresses when sending packets outside local networks.<a href="#section-2.3-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.4">
        <h3 id="name-traversing-address-spaces">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-traversing-address-spaces" class="section-name selfRef">Traversing Address Spaces</a>
        </h3>
<p id="section-2.4-1">Conceptually, packets travel through address spaces based on source and destination
          IPREF addresses. This is analogous to IP protocols. The IPREF addresses are interpreted
          at each address space to render native addresses for forwarding.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<span id="name-traversing-address-spaces-2"></span><div id="traversing-address-spaces">
<figure id="figure-2">
          <div class="alignLeft art-ascii-art art-text artwork" id="section-2.4-2.1">
<pre>
             Network A    │    Internet    │    Network B

src:  2001:db8::9 + 1579   2001:db8::9 + 1579   2001:db8::9 + 1579
dst:  2001:db8::8 + 2466   2001:db8::8 + 2466   2001:db8::8 + 2466

           🡳                    🡳                    🡳

src:  172.17.1.75          2001:db8::9          fdee:eeee::5951
dst:  10.128.48.62         2001:db8::8          2001:db8:b::28


 ┌──────┐        IPv4     │      IPv6      │     IPv6        ┌──────┐
 │ host │.75┃                                            ┃   │ host │
 │  A1  ├───┨  ┏━━━━━━━┓  │                │  ┏━━━━━━━┓  ┠───┤  B4  │
 └──────┘   ┃  ┃ IPREF ┃:9                  :8┃ IPREF ┃  ┃   └──────┘
            ┠──┨ g-way ┠─────  Internet  ─────┨ g-way ┠──┨
 ┌──────┐   ┃  ┃  GWA  ┃                      ┃  GWB  ┃  ┃:28┌──────┐
 │ host ├───┨  ┗━━━━━━━┛  │                │  ┗━━━━━━━┛  ┠───┤ host │
 │  A3  │   ┃                                            ┃   │  B6  │
 └──────┘                 │                │                 └──────┘

</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-traversing-address-spaces-2" class="selfRef">traversing address spaces</a>
          </figcaption></figure>
</div>
<p id="section-2.4-3">For example, in <a href="#traversing-address-spaces" class="auto internal xref">Figure 2</a>, if host A1 wanted to
          send a packet outside of its own address space to host B6, it would need a source
          IPREF address for itself and a destination IPREF address for B6.<a href="#section-2.4-3" class="pilcrow">¶</a></p>
<p id="section-2.4-4">The destination IPREF address of host B6, presumably a server, would be allocated
          by the admin of network B where B6 resides. It would normally be advertised in DNS.
          The source IPREF address of A1, presumably a client, would normally be allocated
          dynamically by the local IPREF gateway.<a href="#section-2.4-4" class="pilcrow">¶</a></p>
<p id="section-2.4-5">As packets travel from source to destination, the following takes place:<a href="#section-2.4-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4-6.1">At network A, the IPREF source address is interpreted as a native address of host
            A1. The destination IPREF address is interpreted as some local private address on
            the encoding network. The encoding allows host A1 to place native addresses in the
            packet. The IPREF gateway will replace both source and destination addresses with
            their IPREF equivalents. It will also repackage IPv4 packets into IPv6 since the next
            address space is IPv6.<a href="#section-2.4-6.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.4-6.2">In the transient address space, the Internet, IPREF addresses are interpreted
            as well even though the network is unaware of that. In the transient networks
            only context addresses are used while the references are ignored. This is
            accomplished by placing context addresses (which must be native) in the respective
            source and destination fields of the native network protocol. In this way, transient
            networks, such as the Internet, don't need to know anything about IPREF.<a href="#section-2.4-6.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.4-6.3">At network B, the IPREF source address is interpreted as some local private address
            on the encoding network. The IPREF destination address is interpreted as the native
            address of host B6. In this way, a packet originating at an IPv4 host A1 reaches an
            IPv6 host B6.<a href="#section-2.4-6.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.4-7">On the way back, source and destination addresses are reversed and their interpretation
          follows the same pattern, thus a reply packet originating at an IPv6 host B6 reaches an
          IPv4 host A1.<a href="#section-2.4-7" class="pilcrow">¶</a></p>
<p id="section-2.4-8">In the example, network A may be IPv4 or IPv6, the Internet may be IPv4 or IPv6, and
          network B may be IPv4 or IPv6. In any combination, a packet traveling through these
          address spaces would be processed in the same manner and it would reach its destination
          in the same way.<a href="#section-2.4-8" class="pilcrow">¶</a></p>
</section>
<section id="section-2.5">
        <h3 id="name-traversing-address-spaces-i">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-traversing-address-spaces-i" class="section-name selfRef">Traversing Address Spaces in Detail</a>
        </h3>
<span id="name-traversing-address-spaces-in"></span><div id="traversing-address-spaces-in-detail">
<figure id="figure-3">
          <div class="alignLeft art-ascii-art art-text artwork" id="section-2.5-1.1">
<pre>
             Network A    │    Internet    │    Network B

 ┌──────┐        IPv4     │      IPv6      │     IPv6        ┌──────┐
 │ host │.75┃                                            ┃   │ host │
 │  A1  ├───┨  ┏━━━━━━━┓  │                │  ┏━━━━━━━┓  ┠───┤  B4  │
 └──────┘   ┃  ┃ IPREF ┃:9                  :8┃ IPREF ┃  ┃   └──────┘
            ┠──┨ g-way ┠─────  Internet  ─────┨ g-way ┠──┨
 ┌──────┐   ┃  ┃  GWA  ┃                      ┃  GWB  ┃  ┃:28┌──────┐
 │ host ├───┨  ┗━━━━━━━┛  │                │  ┗━━━━━━━┛  ┠───┤ host │
 │  A3  │   ┃                                            ┃   │  B6  │
 └──────┘                 │                │                 └──────┘


Internet ifc: 2001:db8::9                 Internet ifc: 2001:db8::8
Local net A:  172.17.1.0/24               Local net B:  2001:db8:b::/64
Encoding net: 10.128.0.0/10               Encoding net: fdee:eeee::/64
Host A1:  172.17.1.75                     Host B6:  2001:db8:b:28
DNS A1:   (none)                          DNS B6:   2001:db8::8 + 2466
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-traversing-address-spaces-in" class="selfRef">traversing address spaces in detail</a>
          </figcaption></figure>
</div>
<p id="section-2.5-2">Let's say an IPv4 host A1 wants to send a packet to an IPv6 host B6:<a href="#section-2.5-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.5-3">
          <li id="section-2.5-3.1">
            <p id="section-2.5-3.1.1">Host A1 finds out the address of host B6<a href="#section-2.5-3.1.1" class="pilcrow">¶</a></p>
<p id="section-2.5-3.1.2">Host A1 issues a DNS query for host B6. The query goes through the local resolver.
              Local resolver receives a response:<a href="#section-2.5-3.1.2" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.1.3">
<pre>B6 has address: 2001:db8::8 + 2466</pre><a href="#section-2.5-3.1.3" class="pilcrow">¶</a>
</div>
<p id="section-2.5-3.1.4">Since local hosts don't understand IPREF addresses, the resolver asks gateway GWA to
              allocate an encoded address for it. The gateway responds:<a href="#section-2.5-3.1.4" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.1.5">
<pre>map: 2001:db8::8 + 2466  =  10.128.48.62</pre><a href="#section-2.5-3.1.5" class="pilcrow">¶</a>
</div>
<p id="section-2.5-3.1.6">The resolver returns the encoded result of the DNS query to host A1:<a href="#section-2.5-3.1.6" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.1.7">
<pre>B6 has address:  10.128.48.62</pre><a href="#section-2.5-3.1.7" class="pilcrow">¶</a>
</div>
</li>
          <li id="section-2.5-3.2">
            <p id="section-2.5-3.2.1">Host A1 sends a packet out to B6<a href="#section-2.5-3.2.1" class="pilcrow">¶</a></p>
<p id="section-2.5-3.2.2">Host A1 places its own address as source and the address of host B6 returned by the
              local resolver as destination.<a href="#section-2.5-3.2.2" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.2.3">
<pre>packet out: | 172.17.1.75 | 10.128.48.62 | payload |</pre><a href="#section-2.5-3.2.3" class="pilcrow">¶</a>
</div>
</li>
          <li id="section-2.5-3.3">
            <p id="section-2.5-3.3.1">Packet arrives at gateway GWA<a href="#section-2.5-3.3.1" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.3.2">
<pre>packet in:  | 172.17.1.75 | 10.128.48.62 | payload |</pre><a href="#section-2.5-3.3.2" class="pilcrow">¶</a>
</div>
<p id="section-2.5-3.3.3">The gateway notices that it does not have mapping for the source address, so it
              creates one on the fly:<a href="#section-2.5-3.3.3" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.3.4">
<pre>map: 172.17.1.75 = 2001:db8::9 + 1579</pre><a href="#section-2.5-3.3.4" class="pilcrow">¶</a>
</div>
<p id="section-2.5-3.3.5">It replaces source address with the just created corresponding IPREF address. It
              replaces encoded destination address with the original IPREF address returned by
              the DNS query. It also repackages IPv4 packet into IPv6 since the Internet is IPv6.<a href="#section-2.5-3.3.5" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.3.6">
<pre>packet out: | 2001:db8::9 + 1579 | 2001:db8::8 + 2466 | payload |</pre><a href="#section-2.5-3.3.6" class="pilcrow">¶</a>
</div>
</li>
          <li id="section-2.5-3.4">
            <p id="section-2.5-3.4.1">Packet arrives at gateway GWB<a href="#section-2.5-3.4.1" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.4.2">
<pre>packet in:  | 2001:db8::9 + 1579 | 2001:db8::8 + 2466 | payload |</pre><a href="#section-2.5-3.4.2" class="pilcrow">¶</a>
</div>
<p id="section-2.5-3.4.3">The gateway notices that it does not have encoding for the source IPREF address,
              so it creates one on the fly:<a href="#section-2.5-3.4.3" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.4.4">
<pre>map: 2001:db8::9 + 1579 = fdee:eeee::5951</pre><a href="#section-2.5-3.4.4" class="pilcrow">¶</a>
</div>
<p id="section-2.5-3.4.5">It replaces source IPREF address with the just created local encoded address. It
              replaces destination IPREF address with the local address of host B6.<a href="#section-2.5-3.4.5" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.4.6">
<pre>packet out: | fdee:eeee::5951 | 2001:db8:b::28 | payload |</pre><a href="#section-2.5-3.4.6" class="pilcrow">¶</a>
</div>
</li>
          <li id="section-2.5-3.5">
            <p id="section-2.5-3.5.1">Packet arrives at host B6<a href="#section-2.5-3.5.1" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.5.2">
<pre>packet in:  | fdee:eeee::5951 | 2001:db8:b::28 | payload |</pre><a href="#section-2.5-3.5.2" class="pilcrow">¶</a>
</div>
<p id="section-2.5-3.5.3">Host B6 recognizes destination address as its own and consumes the packet. OS passes
              the packet to an application implied by layer 4.<a href="#section-2.5-3.5.3" class="pilcrow">¶</a></p>
</li>
          <li id="section-2.5-3.6">
            <p id="section-2.5-3.6.1">Host B6 sends a reply back to A1<a href="#section-2.5-3.6.1" class="pilcrow">¶</a></p>
<p id="section-2.5-3.6.2">Host B6 gets a reply payload from the application, swaps source and destination
              addresses, and sends the packet back to A1.<a href="#section-2.5-3.6.2" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.6.3">
<pre>packet out: | 2001:db8:b::28 | fdee:eeee::5951 | payload |</pre><a href="#section-2.5-3.6.3" class="pilcrow">¶</a>
</div>
</li>
          <li id="section-2.5-3.7">
            <p id="section-2.5-3.7.1">Packet arrives at gateway GWB<a href="#section-2.5-3.7.1" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.7.2">
<pre>packet in:  | 2001:db8:b::28 | fdee:eeee::5951 | payload |</pre><a href="#section-2.5-3.7.2" class="pilcrow">¶</a>
</div>
<p id="section-2.5-3.7.3">The gateway replaces local source address with corresponding IPREF address previously
              allocated and advertised in DNS. It replaces destination local encoded address with
              the corresponding IPREF address from mapping created earlier.<a href="#section-2.5-3.7.3" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.7.4">
<pre>packet out: | 2001:db8::8 + 2466 | 2001:db8::9 + 1579 | payload |</pre><a href="#section-2.5-3.7.4" class="pilcrow">¶</a>
</div>
</li>
          <li id="section-2.5-3.8">
            <p id="section-2.5-3.8.1">Packet arrives at gateway GWA<a href="#section-2.5-3.8.1" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.8.2">
<pre>packet in:  | 2001:db8::8 + 2466 | 2001:db8::9 + 1579 | payload |</pre><a href="#section-2.5-3.8.2" class="pilcrow">¶</a>
</div>
<p id="section-2.5-3.8.3">The gateway replaces source IPREF address with the corresponding local encoded
              address from mapping created earlier. It replaces destination IPREF address with
              the local address of host A1. It also realizes that the local network is IPv4, so
              it repackages the packet into IPv4.<a href="#section-2.5-3.8.3" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.8.4">
<pre>packet out: | 10.128.48.62 | 172.17.1.75 | payload |</pre><a href="#section-2.5-3.8.4" class="pilcrow">¶</a>
</div>
</li>
          <li id="section-2.5-3.9">
            <p id="section-2.5-3.9.1">Packet arrives at host A1<a href="#section-2.5-3.9.1" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.5-3.9.2">
<pre>packet in:  | 10.128.48.62 | 172.17.1.75 | payload |</pre><a href="#section-2.5-3.9.2" class="pilcrow">¶</a>
</div>
<p id="section-2.5-3.9.3">Host A1 recognizes destination address as its own and consumes the packet. OS passes
              the packet to the application that sent the original packet.<a href="#section-2.5-3.9.3" class="pilcrow">¶</a></p>
</li>
        </ol>
<p id="section-2.5-4">At this point any missing mappings have been allocated. Subsequent packet exchange
          continues without additional allocations.<a href="#section-2.5-4" class="pilcrow">¶</a></p>
</section>
<section id="section-2.6">
        <h3 id="name-embedding-references-in-ip-">
<a href="#section-2.6" class="section-number selfRef">2.6. </a><a href="#name-embedding-references-in-ip-" class="section-name selfRef">Embedding References in IP Packets</a>
        </h3>
<p id="section-2.6-1">References are network layer entities therefore the most natural place for embedding
          them would be network layer headers, such as IPv4 options or IPv6 extension headers.<a href="#section-2.6-1" class="pilcrow">¶</a></p>
<p id="section-2.6-2">Unfortunately, many Internet Service Providers drop options and extension headers for
          various reasons. Even if they don't, routers tend to put them on a slow processing
          path resulting in poor performance. For that reason, the most reliable way to embed
          references is to place them in the payload. One common technique of accomplishing this
          is tunneling where references could be made a part of the payload.<a href="#section-2.6-2" class="pilcrow">¶</a></p>
<section id="section-2.6.1">
          <h4 id="name-ipv4-option">
<a href="#section-2.6.1" class="section-number selfRef">2.6.1. </a><a href="#name-ipv4-option" class="section-name selfRef">IPv4 Option</a>
          </h4>
<p id="section-2.6.1-1">With IPv4, references may be embedded in an IPv4 header option <span>[<a href="#RFC791" class="cite xref">RFC791</a>]</span>.
             It would be a new option type. It would contain an octet with option type and option
             number, an octet with length, and two octets reserved for possible future use while
             padding to four octet boundary. The source and destination references would then follow.<a href="#section-2.6.1-1" class="pilcrow">¶</a></p>
<p id="section-2.6.1-2">A new option number would be registered with IANA. Until then, experimental option, 30,
             could be used.<a href="#section-2.6.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.6.2">
          <h4 id="name-ipv6-extension-header">
<a href="#section-2.6.2" class="section-number selfRef">2.6.2. </a><a href="#name-ipv6-extension-header" class="section-name selfRef">IPv6 Extension Header</a>
          </h4>
<p id="section-2.6.2-1">With IPv6, references may be embedded in an IPv6 extension header <span>[<a href="#RFC8200" class="cite xref">RFC8200</a>]</span>.
             It would be a new header type. It would contain an octet with next header type value,
             an octet with length, and two octets reserved for possible future use. This would be
             followed by four octets of padding to 8 octet boundary. Padding octets would not be
             intended for any future use. The source and destination references would then follow.<a href="#section-2.6.2-1" class="pilcrow">¶</a></p>
<p id="section-2.6.2-2">A new protocol type would be registered with IANA. Until then, experimental protocol,
             254, could be used.<a href="#section-2.6.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.6.3">
          <h4 id="name-udp-tunnel">
<a href="#section-2.6.3" class="section-number selfRef">2.6.3. </a><a href="#name-udp-tunnel" class="section-name selfRef">UDP Tunnel</a>
          </h4>
<p id="section-2.6.3-1">Placing references in a UDP tunnel works for both IPv4 and IPv6. In both cases, the
             references are embedded in the form of respective options or extension headers. In
             addition, a tunnel encapsulation record is added. The order of items is as follows:<a href="#section-2.6.3-1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty">
<li class="compact ulEmpty" id="section-2.6.3-2.1">UDP header<a href="#section-2.6.3-2.1" class="pilcrow">¶</a>
</li>
            <li class="compact ulEmpty" id="section-2.6.3-2.2">Tunnel encapsulation record<a href="#section-2.6.3-2.2" class="pilcrow">¶</a>
</li>
            <li class="compact ulEmpty" id="section-2.6.3-2.3">IPREF option<a href="#section-2.6.3-2.3" class="pilcrow">¶</a>
</li>
            <li class="compact ulEmpty" id="section-2.6.3-2.4">Packet payload<a href="#section-2.6.3-2.4" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-2.6.3-3">The encapsulation record would consist of four octets. First octet would contain the
             value of TTL copied from the original IP header. The second octet would contain protocol
             number copied from the original IPv4 header or next header value form an IPv6 extension
             header. The third octet would report number of hops detected for incoming packets. The
             fourth octet would be reserved for possible future use while padding to 4 octet boundary.
             The IPREF option would follow in the format matching respective IP protocol, IPv4 or IPv6.<a href="#section-2.6.3-3" class="pilcrow">¶</a></p>
<p id="section-2.6.3-4">The tunnel would operate at port 1045. This value would be registered with IANA.<a href="#section-2.6.3-4" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.7">
        <h3 id="name-name-resolution-support">
<a href="#section-2.7" class="section-number selfRef">2.7. </a><a href="#name-name-resolution-support" class="section-name selfRef">Name Resolution Support</a>
        </h3>
<p id="section-2.7-1">IPREF gateways provide mapping support for name resolution services such as DNS. When
          resolving queries on behalf of local hosts, all returned IPREF addresses must be mapped
          to native addresses of the local network protocol. Typically, a subnet on a private
          network is dedicated for the purpose. That subnet is used just for encoding, there are
          no real hosts with these addresses. There may be a need to standardize on how resolvers
          communicate with gateways to obtain such mappings.<a href="#section-2.7-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3">
      <h2 id="name-dns-with-ipref">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-dns-with-ipref" class="section-name selfRef">DNS with IPREF</a>
      </h2>
<p id="section-3-1">IPREF takes full advantage of DNS <span>[<a href="#RFC1035" class="cite xref">RFC1035</a>]</span>. Local networks may
        publish IPREF addresses of any services hosted on local networks. Standard
        DNS servers may be used for the purpose.<a href="#section-3-1" class="pilcrow">¶</a></p>
<span id="name-dns-with-ipref-2"></span><div id="dns-with-ipref">
<figure id="figure-4">
        <div class="alignLeft art-ascii-art art-text artwork" id="section-3-2.1">
<pre>
             Network A    │
                                ╔═══════╗
 ┌──────┐                 │     ║ publc ║
 │ host │.75┃      ┌────────────╢  DNS  ║    A3  AA  2001:db8::9 + 1733
 │  A1  ├───┨  ┏━━━┷━━━┓  │     ║ servr ║          ────────&gt;
 └──────┘   ┃  ┃ IPREF ┃:9      ╚═══════╝
            ┠──┨ g-way ┠─────
 ┌──────┐   ┃  ┃  GWA  ┃
 │ host ├───┨  ┗━━━┯━━━┛  │    Internet
 │  A3  │   ┃      │                                     ╔═══════╗
 └──────┘          │      │                              ║ other ║
                   │                                     ║ ╔═══════╗
     ▲         ╔═══╧═══╗  │                              ║ ║ other ║
     │         ║ local ║          &lt;───────               ╚═║ ╔═══════╗
     ╰────     ║  DNS  ║     B6  AA  2001:db8::8 + 2466    ║ ║ other ║
               ║ rslvr ║                                   ╚═║  DNS  ║
               ╚═══════╝  │                                  ║ servr ║
                                                             ╚═══════╝
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-dns-with-ipref-2" class="selfRef">DNS with IPREF</a>
        </figcaption></figure>
</div>
<p id="section-3-3">For resolution of DNS names, a modified recursive resolver is required because IPREF
        addresses are different from IPv4 and IPv6 addresses. The resolver must recognize them
        in addition to native IP addresses.<a href="#section-3-3" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-dns-records">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-dns-records" class="section-name selfRef">DNS Records</a>
        </h3>
<p id="section-3.1-1">IPREF addresses are unlike well known IPv4 addresses or IPv6 addresses. These addresses
          consist of two components which must be considered as a single address entity. It is not
          possible to separate references from their companion context addresses. For that reason,
          there is a need for a new resource record type. The new record type is tentatively called
          AA. This record type has not been registered yet. Until such time, a TXT record may be
          used instead. The TXT record simply holds a textual representation of an AA record.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2"> Here are some examples of what the records might look like:<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-3.1-3">
<pre>
    Host-B4     AA      198.51.100.22 + 400
    Host-A5     AA      net-A + 500
    Host-A5     AA      2001:db8::abc:11 + 700
    Host-A5     TXT     "AA net-A + 500"
</pre><a href="#section-3.1-3" class="pilcrow">¶</a>
</div>
<p id="section-3.1-4">The IP portion may be provided numerically or as a domain name. The format for the
          reference would allow unsigned decimal integers as well as unsigned hex integers. 
          Other formats may be defined as well.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2">
        <h3 id="name-local-network-resolvers">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-local-network-resolvers" class="section-name selfRef">Local Network Resolvers</a>
        </h3>
<p id="section-3.2-1">Local network resolvers must recognize IPREF addresses returned by DNS queries. They
          must also be capable of encoding them into native IP addresses in consultation with
          IPREF gateways. This is shown in <a href="#dns-with-ipref" class="auto internal xref">Figure 4</a> as a line connecting
          local DNS resolver with IPREF gateway GWA. Encoding is needed because local hosts do
          not understand IPREF addresses. Instead, local hosts use encoded equivalents which
          are then replaced with the actual IPREF addresses by the gateways. There may be a need
          to standardize on how resolvers communicate with gateways.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3">
        <h3 id="name-detecting-published-ipref-a">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-detecting-published-ipref-a" class="section-name selfRef">Detecting Published IPREF Addresses</a>
        </h3>
<p id="section-3.3-1">All published IPREF addresses must be communicated to local IPREF gateways so that
          they can properly map destination addresses of incoming packets. This is reflected
          in <a href="#dns-with-ipref" class="auto internal xref">Figure 4</a> by a line connecting public DNS server with IPREF
          gateway GWA. There is a number of ways to accomplish this. There may be a need to
          standardize on how this should be done to allow interoperability between different
          gateways and different DNS servers.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3.4">
        <h3 id="name-dnssec-compatibility">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-dnssec-compatibility" class="section-name selfRef">DNSSEC compatibility</a>
        </h3>
<p id="section-3.4-1">IPREF address records may be protected by DNSSEC. Packets leaving local networks
          contain the exact addresses returned from DNS. Internally, local hosts use encoded
          versions of these addresses which complicates things a little but the gateways replace
          them with the original IPREF addresses listed in DNS before sending packets out of the
          local network.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3.5">
        <h3 id="name-ipref-address-literals">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-ipref-address-literals" class="section-name selfRef">IPREF Address Literals</a>
        </h3>
<p id="section-3.5-1">DNS is immensely useful and it is considered a necessary component of IP networking.
          But IP networking does not relay on DNS. It works just fine with IP address literals
          entered and distributed manually. Similarly, IPREF does not rely on DNS. It is possible
          to use IPREF address literals in a manner similar to IP. The addresses would still
          need to be encoded by the gateways. They would be entered manually at gateways first,
          then their encoded equivalents would be distributed to hosts, possibly as entries in
          /etc/hosts files.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4">
      <h2 id="name-using-ipref-for-transitioni">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-using-ipref-for-transitioni" class="section-name selfRef">Using IPREF for Transitioning to IPv6</a>
      </h2>
<p id="section-4-1">Transitioning to IPv6 with IPREF offers significant benefits to both the transitioning
        organizations as well as to the Internet service providers, carriers, and operators.<a href="#section-4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-2.1">needs only pure IPv6 Internet (no need for IPv4 services or translators)<a href="#section-4-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.2">transitions directly to pure IPv6 (no dual stacks, no two-step transition)<a href="#section-4-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.3">no need for global IPv4 addresses<a href="#section-4-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.4">eliminates NAT/NAT6 (all hosts reachable, all ports available)<a href="#section-4-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.5">plays nicely with DNSSEC<a href="#section-4-2.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.6">allows to drop IPv4 Internet early<a href="#section-4-2.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.7">allows to transition at own pace<a href="#section-4-2.7" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.8">massively scalable<a href="#section-4-2.8" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.9">dramatically speeds up adoption of IPv6 Internet<a href="#section-4-2.9" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.10">huge cost savings<a href="#section-4-2.10" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-4-3">The ability to drop IPv4 Internet early is the key to speeding up adoption of IPv6
        Internet.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">Relying on only pure IPv6 Internet and transitioning to pure IPv6 greatly simplifies
        network designs and operations. Transition based on IPREF produces cleaner, simpler
        networks and a cleaner, simpler Internet.<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">The ability to transition at own pace, service by service, subnet by subnet results in
        huge reduction in costs and risks.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">Traditional transition strategies have a structural deficiency. They perpetuate IPv4
        addressing. Thus they extend the life of IPv4 Internet endlessly, to the point it may
        not be possible to take it down. This is caused by the use of dual stacks and a collection
        of translation devices such as NAT64/SIIT/464XLAT which all require allocation of IPv4
        addresses. They are set up first, before transition takes place, and cannot be taken down
        until AFTER all networks out there transition to IPv6. This may take decades to happen
        if ever.<a href="#section-4-6" class="pilcrow">¶</a></p>
<p id="section-4-7">IPREF does not have such deficiencies. It does not use dual stacks and it does not use
        any translator devices that rely on IPv4 addresses. IPREF gateways are set up first which
        makes it possible to drop IPv4 Internet very early. The actual transition of the local
        networks takes place after the Internet has been switched to IPv6. In this way, the life
        of the IPv4 Internet is never extended by the transitioning effort.<a href="#section-4-7" class="pilcrow">¶</a></p>
<section id="section-4.1">
        <h3 id="name-transitioning-process">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-transitioning-process" class="section-name selfRef">Transitioning Process</a>
        </h3>
<p id="section-4.1-1">Transitioning process with IPREF takes advantage of IPREF's flexibility to operate
          in all combinations of address spaces:<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-4.1-2">
<pre>
        network A   Internet   Network B

    1       IPv4      IPv4      IPv4        -- starting point
    2       IPv4      IPv4      IPv6           (possible but rare)
    3       IPv4      IPv6      IPv4        -- after dropping IPv4 Internet
    4       IPv4      IPv6      IPv6        -- common during transition
    5       IPv6      IPv4      IPv4           (same as 2)
    6       IPv6      IPv4      IPv6           (possible but rare)
    7       IPv6      IPv6      IPv4           (same as 4)
    8       IPv6      IPv6      IPv6        -- completed transition
</pre><a href="#section-4.1-2" class="pilcrow">¶</a>
</div>
<p id="section-4.1-3">Because different address spaces - network A, Internet, and network B - are processed
          independently by IPREF, it decouples transitioning process at local networks from
          transitioning efforts at peer networks. It also decouples the process from the Internet
          protocol thus allowing dropping of IPv4 Internet early.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.1-4">
          <li id="section-4.1-4.1">
            <p id="section-4.1-4.1.1">Starting point<a href="#section-4.1-4.1.1" class="pilcrow">¶</a></p>
<div class="alignLeft art-ascii-art art-text artwork" id="section-4.1-4.1.2">
<pre>
             Network A    │    Internet    │    Network B

             ┏━━━━━━━┓    │      IPv6      │    ┏━━━━━━━┓
             ┫ IPREF ┣                          ┫ IPREF ┣
   IPv4      ┃ g-way ┃    │      IPv4      │    ┃ g-way ┃      IPv4
  ════════╗  ┫  GWA  ┣  ╔════════════════════╗  ┫  GWB  ┣  ╔════════
          ║  ┗━━━━━━━┛  ║ │                │ ║  ┗━━━━━━━┛  ║
          ╚═════════════╝                    ╚═════════════╝
                          │                │
</pre><a href="#section-4.1-4.1.2" class="pilcrow">¶</a>
</div>
<p id="section-4.1-4.1.3">IPREF gateways are installed but not used. All connectivity is pure IPv4.<a href="#section-4.1-4.1.3" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.1-4.2">
            <p id="section-4.1-4.2.1">Switching traffic to IPREF<a href="#section-4.1-4.2.1" class="pilcrow">¶</a></p>
<div class="alignLeft art-ascii-art art-text artwork" id="section-4.1-4.2.2">
<pre>
             Network A    │    Internet    │    Network B

   IPv6      ┏━━━━━━━┓    │      IPv6      │    ┏━━━━━━━┓
  ╌ ╌ ╌ ╌ ╌ ╌┫ IPREF ┣                          ┫ IPREF ┣
   IPv4      ┃ g-way ┃    │      IPv4      │    ┃ g-way ┃      IPv4
  ═══════════┫  GWA  ┣══════════════════════════┫  GWB  ┣═══════════
             ┗━━━━━━━┛    │                │    ┗━━━━━━━┛

                          │                │
</pre><a href="#section-4.1-4.2.2" class="pilcrow">¶</a>
</div>
<p id="section-4.1-4.2.3">IPREF gateways are configured. References are assigned. Traffic goes through the
              gateways. All services subject to transition are now accessed via IPREF. Some local
              IPv6 networks may be set up but not used yet.<a href="#section-4.1-4.2.3" class="pilcrow">¶</a></p>
<p id="section-4.1-4.2.4">Transition process at local networks is decoupled from any transition effort taking
              place at peer networks. It is also decoupled from the type of Internet connection.
              Traffic between gateways remains over IPv4 Internet until both ends connect to IPv6
              Internet. This does not affect transitioning of local networks to IPv6.<a href="#section-4.1-4.2.4" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.1-4.3">
            <p id="section-4.1-4.3.1">Connecting to IPv6 Internet<a href="#section-4.1-4.3.1" class="pilcrow">¶</a></p>
<div class="alignLeft art-ascii-art art-text artwork" id="section-4.1-4.3.2">
<pre>
             Network A    │    Internet    │    Network B

   IPv6      ┏━━━━━━━┓    │      IPv6      │    ┏━━━━━━━┓
  ═══════════┫ IPREF ┣╌ ╌ ╌ ╌                   ┫ IPREF ┣
   IPv4      ┃ g-way ┃    │      IPv4      │    ┃ g-way ┃      IPv4
  ═══════════┫  GWA  ┣══════════════════════════┫  GWB  ┣═══════════
             ┗━━━━━━━┛    │                │    ┗━━━━━━━┛

                          │                │
</pre><a href="#section-4.1-4.3.2" class="pilcrow">¶</a>
</div>
<p id="section-4.1-4.3.3">Each side connects to IPv6 Internet at their own pace. Local IPv6 networks may
              start to appear. These are pure IPv6 networks, no dual stacks. Connectivity
              between local IPv4/IPv6 networks is provided by the same IPREF gateway that
              connects to remote peers.<a href="#section-4.1-4.3.3" class="pilcrow">¶</a></p>
<p id="section-4.1-4.3.4">Clients located on local IPv6 networks can reach servers located on local IPv4
              networks or remote networks (IPv4 or IPv6). Similarly, servers on local IPv6
              network can be reached from clients located on local IPv4 networks as well as
              from remote networks (IPv4 or IPv6).<a href="#section-4.1-4.3.4" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.1-4.4">
            <p id="section-4.1-4.4.1">Switching gateway traffic to IPv6<a href="#section-4.1-4.4.1" class="pilcrow">¶</a></p>
<div class="alignLeft art-ascii-art art-text artwork" id="section-4.1-4.4.2">
<pre>
             Network A    │    Internet    │    Network B

   IPv6      ┏━━━━━━━┓    │      IPv6      │    ┏━━━━━━━┓      IPv6
  ═══════════┫ IPREF ┣══════════════════════════┫ IPREF ┣╌ ╌ ╌ ╌ ╌ ╌
   IPv4      ┃ g-way ┃    │      IPv4      │    ┃ g-way ┃      IPv4
  ═══════════┫  GWA  ┣╌ ╌ ╌ ╌ ╌ ╌ ╌ ╌ ╌ ╌ ╌ ╌ ╌ ┫  GWB  ┣═══════════
             ┗━━━━━━━┛    │                │    ┗━━━━━━━┛

                          │                │
</pre><a href="#section-4.1-4.4.2" class="pilcrow">¶</a>
</div>
<p id="section-4.1-4.4.3">After both ends connect to IPv6 Internet, IPREF addresses may be changed to switch
              traffic to go over the IPv6 Internet. Transition process at local networks is not
              affected by this change.<a href="#section-4.1-4.4.3" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.1-4.5">
            <p id="section-4.1-4.5.1">Dropping IPv4 Internet<a href="#section-4.1-4.5.1" class="pilcrow">¶</a></p>
<div class="alignLeft art-ascii-art art-text artwork" id="section-4.1-4.5.2">
<pre>
             Network A    │    Internet    │    Network B

   IPv6      ┏━━━━━━━┓    │      IPv6      │    ┏━━━━━━━┓      IPv6
  ═══════════┫ IPREF ┣══════════════════════════┫ IPREF ┣╌ ╌ ╌ ╌ ╌ ╌
   IPv4      ┃ g-way ┃    │                │    ┃ g-way ┃      IPv4
  ═══════════┫  GWA  ┣                          ┫  GWB  ┣═══════════
             ┗━━━━━━━┛    │                │    ┗━━━━━━━┛

                          │                │
</pre><a href="#section-4.1-4.5.2" class="pilcrow">¶</a>
</div>
<p id="section-4.1-4.5.3">IPv4 Internet may now be dropped. It takes place early in the process. From the
              Internet's point of view, transition to IPv6 has completed. The Internet does not
              have to wait until every local networks transitions to IPv6. As sites keep dropping
              their IPv4 Internet connections, the entire IPv4 Internet may be taken down well
              before every network out there completes its transition. This is possible thanks
              to decoupling of the transitioning at local networks from the Internet protocol.<a href="#section-4.1-4.5.3" class="pilcrow">¶</a></p>
<p id="section-4.1-4.5.4">From local networks point of view, the disappearance of IPv4 Internet is invisible.
              It does not affect local transitioning process.<a href="#section-4.1-4.5.4" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.1-4.6">
            <p id="section-4.1-4.6.1">Switching to IPv6 independently<a href="#section-4.1-4.6.1" class="pilcrow">¶</a></p>
<div class="alignLeft art-ascii-art art-text artwork" id="section-4.1-4.6.2">
<pre>
             Network A    │    Internet    │    Network B

   IPv6      ┏━━━━━━━┓    │      IPv6      │    ┏━━━━━━━┓      IPv6
  ═══════════┫ IPREF ┣══════════════════════════┫ IPREF ┣═══════════
   IPv4      ┃ g-way ┃    │                │    ┃ g-way ┃
  ═══════════┫  GWA  ┣                          ┫  GWB  ┣
             ┗━━━━━━━┛    │                │    ┗━━━━━━━┛

                          │                │
</pre><a href="#section-4.1-4.6.2" class="pilcrow">¶</a>
</div>
<p id="section-4.1-4.6.3">Each respective local network switches to IPv6 independently and may progress at
              its own pace. It may elect to stay with a mix IPv4/IPv6 for as long as necessary
              or convenient. This does not affect other networks.<a href="#section-4.1-4.6.3" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.1-4.7">
            <p id="section-4.1-4.7.1">Completing transition<a href="#section-4.1-4.7.1" class="pilcrow">¶</a></p>
<div class="alignLeft art-ascii-art art-text artwork" id="section-4.1-4.7.2">
<pre>
             Network A    │    Internet    │    Network B

   IPv6      ┏━━━━━━━┓    │      IPv6      │    ┏━━━━━━━┓      IPv6
  ═══════════┫ IPREF ┣══════════════════════════┫ IPREF ┣═══════════
             ┃ g-way ┃    │                │    ┃ g-way ┃
             ┫  GWA  ┣                          ┫  GWB  ┣
             ┗━━━━━━━┛    │                │    ┗━━━━━━━┛

                          │                │
</pre><a href="#section-4.1-4.7.2" class="pilcrow">¶</a>
</div>
<p id="section-4.1-4.7.3">Transition is completed when each side switches its internal network to IPv6. All
              internal networks are pure IPv6. The Internet is also pure IPv6. IPREF gateways may
              be removed, or they may remain in place to allow communication with third party
              sites that have not transitioned.<a href="#section-4.1-4.7.3" class="pilcrow">¶</a></p>
</li>
        </ol>
</section>
</section>
<section id="section-5">
      <h2 id="name-related-technologies">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-related-technologies" class="section-name selfRef">Related Technologies</a>
      </h2>
<p id="section-5-1">IPREF works well with related technologies. It does not create conflicts and it does
        not attempt to step on their functionality.<a href="#section-5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-2.1">IPv4 - IPREF does not replace IPv4, it is an optional add-on to enhance IPv4
             capabilities in the area of address rewriting. It relies on IPv4 in all other
             functions of a network protocol.<a href="#section-5-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-5-2.2">IPv6 - IPREF does not replace IPv6, it is an optional add-on to enhance IPv6
             capabilities in the area of address rewriting. It relies on IPv6 in all other
             functions of a network protocol.<a href="#section-5-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-5-2.3">NAT - IPREF is an address rewriting technology but operates differently than NAT.
            It operates exclusively at the network layer. It does not reach to upper layer
            protocols or lower layer protocols. For example, there is no manipulation of TCP/UDP
            ports. All layer 4 ports are carried transparently as-is. IPREF does not conflict
            with NAT. In a common configuration, a NAT gateway connects to the Internet without
            any changes. IPREF may operate in parallel to NAT on the same gateway, or it may
            operate on another gateway within the local network 'behind NAT'.<a href="#section-5-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-5-2.4">VPN - IPREF deals mostly with addressing. It does not perform typical functions of
             a VPN and it does not replace it. It behaves differently. A typical VPN makes hosts
             of a local network appear as if members of some other local network. Hosts subjected
             to a VPN are managed by that other private networks. This involves a substantial level
             of trust between the two private networks. IPREF does not do any of that. Hosts
             reachable through IPREF are firmly in their respective private networks and remain
             managed by their respective administrators. There may be cases where IPREF may be
             deemed sufficient for a particular purpose but in general IPREF is not a substitute
             for a VPN. IPREF does not conflict with VPNs. A VPN might use IPREF to establish
             a VPN connection.<a href="#section-5-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-5-2.5">Firewall - IPREF is not a firewall. While allocation or lack of allocation of
            references has the effect of blocking or allowing access, blocking policy is best
            vested with firewalls. IPREF mappers deal with address rewriting, they are not packet
            filters. There is no conflict between firewalls and IPREF. Firewalls might benefit
            from IPREF specific features to simplify management and configuration.<a href="#section-5-2.5" class="pilcrow">¶</a>
</li>
      </ul>
</section>
<div id="IANA">
<section id="section-6">
      <h2 id="name-iana-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-6-1">This memo includes no requests to IANA.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Security">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">This document should not affect the security of the Internet. Documents describing particular
        pieces of IPREF might. Proper security consideration statements would be included in those
        documents.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-8">
      <h2 id="name-references-2">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-references-2" class="section-name selfRef">References</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-normative-references">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC791">[RFC791]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Internet Protocol"</span>, <span class="seriesInfo">RFC 791</span>, <time datetime="1981-09" class="refDate">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc791">https://www.rfc-editor.org/info/rfc791</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1035">[RFC1035]</dt>
        <dd>
<span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - implementation and specification"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1035</span>, <span class="seriesInfo">DOI 10.17487/RFC1035</span>, <time datetime="1987-11" class="refDate">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1035">https://www.rfc-editor.org/info/rfc1035</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8200">[RFC8200]</dt>
        <dd>
<span class="refAuthor">Deering, S.</span> and <span class="refAuthor">R. Hinden</span>, <span class="refTitle">"Internet Protocol, Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 86</span>, <span class="seriesInfo">RFC 8200</span>, <span class="seriesInfo">DOI 10.17487/RFC8200</span>, <time datetime="2017-07" class="refDate">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8200">https://www.rfc-editor.org/info/rfc8200</a>&gt;</span>. </dd>
<dd class="break"></dd></dl>
</section>
<section id="section-8.2">
        <h3 id="name-informative-references">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Waldemar Augustyn (<span class="role">editor</span>)</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:waldemar@wdmsys.com" class="email">waldemar@wdmsys.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
