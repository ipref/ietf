<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>IP Addressing with References (IPREF)</title>
<meta content="Waldemar Augustyn" name="author">
<meta content="
       This document describes IP addressing with references (referred to as IPREF) and how it
        can be used with IPv4 and IPv6. It uses special addresses called IPREF addresses which
        use references to IP addresses instead of actual addresses. IPREF provides highly scalable
        means of traversing private address spaces end-to-end. It can traverse private address
        spaces both within the same protocol domain and across protocol domains. For example, it
        allows NAT traversal for IPv4, or for IPv6 with NAT6 or filters. It also allows direct
        communication between IPv4 and IPv6 networks, including over NAT, NAT6, or filters.
       
       IPREF addresses are publishable via Domain Name System (DNS). Any host on any private
        network may publish its services via DNS. These services are reachable from any network,
        whether IPv4 or IPv6, provided IPREF is supported on both ends.
       
    " name="description">
<meta content="xml2rfc 3.17.4" name="generator">
<meta content="IPREF" name="keyword">
<meta content="draft-augustyn-intarea-ipref-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.17.4
    Python 3.10.6
    ConfigArgParse 1.5.3
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.2
    platformdirs 3.7.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.31.0
    setuptools 59.6.0
    six 1.16.0
    wcwidth 0.2.6
    weasyprint 59.0
-->
<link href="/usr/src/app/tmp/5eab978f-e156-48ab-9b80-9156241db92e/draft-augustyn-intarea-ipref-01.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef,
.iref + a[href].internal {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body class="xml2rfc">
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">IP Addressing with References (IPREF)</td>
<td class="right">June 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Augustyn</td>
<td class="center">Expires 26 December 2023</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Internet Engineering Task Force</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-augustyn-intarea-ipref-01</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2023-06-24" class="published">24 June 2023</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2023-12-26">26 December 2023</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">W. Augustyn, <span class="editor">Ed.</span>
</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">IP Addressing with References (IPREF)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes IP addressing with references (referred to as IPREF) and how it
        can be used with IPv4 and IPv6. It uses special addresses called IPREF addresses which
        use references to IP addresses instead of actual addresses. IPREF provides highly scalable
        means of traversing private address spaces end-to-end. It can traverse private address
        spaces both within the same protocol domain and across protocol domains. For example, it
        allows NAT traversal for IPv4, or for IPv6 with NAT6 or filters. It also allows direct
        communication between IPv4 and IPv6 networks, including over NAT, NAT6, or filters.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">IPREF addresses are publishable via Domain Name System (DNS). Any host on any private
        network may publish its services via DNS. These services are reachable from any network,
        whether IPv4 or IPv6, provided IPREF is supported on both ends.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 26 December 2023.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-requirements-language" class="internal xref">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-ipref-terminology" class="internal xref">IPREF Terminology</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-ipref-operations-framework" class="internal xref">IPREF Operations Framework</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-ipref-references" class="internal xref">IPREF References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-ipref-addresses" class="internal xref">IPREF Addresses</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="auto internal xref">2.3</a>.  <a href="#name-embedding-references-in-ip-" class="internal xref">Embedding References in IP Packets</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.1">
                    <p id="section-toc.1-1.2.2.3.2.1.1"><a href="#section-2.3.1" class="auto internal xref">2.3.1</a>.  <a href="#name-ipv4-option" class="internal xref">IPv4 Option</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.2">
                    <p id="section-toc.1-1.2.2.3.2.2.1"><a href="#section-2.3.2" class="auto internal xref">2.3.2</a>.  <a href="#name-ipv6-extension-header" class="internal xref">IPv6 Extension Header</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3.2.3">
                    <p id="section-toc.1-1.2.2.3.2.3.1"><a href="#section-2.3.3" class="auto internal xref">2.3.3</a>.  <a href="#name-udp-tunnel" class="internal xref">UDP Tunnel</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="auto internal xref">2.4</a>.  <a href="#name-traversing-address-spaces-i" class="internal xref">Traversing Address Spaces in the Same Protocol Domain</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="auto internal xref">2.5</a>.  <a href="#name-traversing-address-spaces-a" class="internal xref">Traversing Address Spaces Across Protocol Domains</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6">
                <p id="section-toc.1-1.2.2.6.1"><a href="#section-2.6" class="auto internal xref">2.6</a>.  <a href="#name-delegating-references" class="internal xref">Delegating References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6.2.1">
                    <p id="section-toc.1-1.2.2.6.2.1.1"><a href="#section-2.6.1" class="auto internal xref">2.6.1</a>.  <a href="#name-no-services-published-via-d" class="internal xref">No Services Published via DNS</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6.2.2">
                    <p id="section-toc.1-1.2.2.6.2.2.1"><a href="#section-2.6.2" class="auto internal xref">2.6.2</a>.  <a href="#name-services-potentially-publis" class="internal xref">Services Potentially Published via DNS</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.7">
                <p id="section-toc.1-1.2.2.7.1"><a href="#section-2.7" class="auto internal xref">2.7</a>.  <a href="#name-name-resolution-support" class="internal xref">Name Resolution Support</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-dns-with-ipref" class="internal xref">DNS with IPREF</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-dns-records" class="internal xref">DNS Records</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-local-network-resolver" class="internal xref">Local Network Resolver</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-dns-agent" class="internal xref">DNS Agent</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-related-technologies" class="internal xref">Related Technologies</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Most hosts on the Internet are actually not directly attached to the Internet. Instead
        they reside on local networks that are attached to the Internet through some sort of
        a firewall that limits external access to them. In the IPv4 case, the firewall commonly
        runs Network Address Translation (NAT). In the case of IPv6, it may be filters but it
        also may be NAT6 behaving similarly to NAT. Whichever the case, peer-to-peer connectivity
        is greatly limited. This creates a problem commonly referred to as NAT traversal.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">For common services, especially those advertised through Domain Name System (DNS), the
        problem is solved by exposing local servers to the Internet as if they were residing
        directly on the Internet. The solution works because it relies on the client server
        nature of these services. In this model, the servers wait until some host initiates
        a connection. Firewalls and NAT make sure the return path for the packets is open. The
        servers don't initiate connection on their own (unless to other servers that are
        already exposed to the Internet).<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">For peer-to-peer applications, there is no general solution. Instead, there is a hodgepodge
        of half solutions suitable for selected cases, none of them scalable. They mostly attempt
        to temporarily expose internal hosts at the edge router's address and some specific port,
        or deduce if such an exposure exists which then may be passed to applications that can
        make use of such information.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">There is a similar problem when attempting to traverse different protocol domains, such
        as IPv4/IPv6. It is a somewhat harder problem to solve given different protocols in play.
        One attempt to do that, known as NAT64/SIIT, illustrates the difficulties. The result
        cannot be even called a solution as it is severely constrained. It is more of a study. It
        requires external translation devices through which all traffic must go, and which
        require configuration that needs to be externally maintained. It does not scale beyond
        very small setups. It also requires allocating global IPv4 addresses for IPv6 peers.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">All of these attempted solutions suffer great difficulties because they try to render
        necessary address transformations too early. IPREF takes a different approach. It is
        based on the observation that the originating hosts actually do not have to know what the
        destination addresses are, or what protocol they belong to, so long as they can be referred
        to in a manner understood by both ends. Thus, IPREF uses references to addresses rather
        than real addresses. This allows to delay the rendering of necessary transformations until
        a proper context is available. This approach works not only for NAT traversal but also for
        protocol traversal since both problems are actually about the same problem: traversing
        different address spaces potentially in different protocol domains. The protocol domain
        matters only to the extent that a sufficient compatibility exists between the protocols
        that packet payloads may be repackaged from one to the other while keeping functionality
        of higher level protocols, such as TCP/UDP, intact. Such a compatibility exists between
        IPv4 and IPv6.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">With this approach, IPREF does not need to negotiate anything. It does not need any
        external devices, any external configurations. It does not require allocating any
        global IP addresses from involved protocols. The result is a highly scalable solution
        that works over NAT, NAT6, filters, and across IPv4/IPv6.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">In practical implementations, all IPREF processing is vested with gateways designated for
        the purpose. The gateways may be the same as network edge routers but they may also reside
        inside the networks, behind the edge routers and firewalls ("behind NAT"). The gateways
        deal with processing of references and with any address mapping. If protocol conversion is
        necessary, they run dual stacks and perform payload repackaging between the protocols. The
        references, along with context addresses passed with them, are called 'IPREF addresses' to
        distinguish them from native addresses. The gateways translate both source and destination
        IPREF addresses to native addresses of the local network protocol before injecting packets
        to local networks.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">The rest of the hosts on the network are standard hosts running whichever local network
        protocol is employed, IPv4 or IPv6. They never see IPREF addresses or references. They
        are completely oblivious to any IPREF processing taking place at the gateways. They do not
        need to run dual stacks, nor is there any advantage doing so. They may run just a single
        stack which could lead to lowering the cost of building and maintaining networks.<a href="#section-1-8" class="pilcrow">¶</a></p>
<p id="section-1-9">IPREF addresses are publishable via DNS. Such publishing does not consume any global
        addresses of any network protocols. Any host on a private network may publish services
        at any port they wish. For example there maybe five different hosts publishing web
        services at port 443 and all five will be reachable at that port and all five may
        advertise their services via DNS.<a href="#section-1-9" class="pilcrow">¶</a></p>
<p id="section-1-10">Publishing without consuming global IP addresses is very attractive for IPv4 but there
        are more reasons to publish as IPREF which apply equally to IPv4 and IPv6. Chiefly among
        them is cross protocol reach. Such services may be accessed from IPv4 and IPv6 clients
        which is very useful in any transition strategy. Further, IPREF references are very light.
        They may be allocated and discarded easily, at will, or at time intervals. They may expire,
        may be shadowed by different references pointing to the same services. They may be
        preferable over exposing internal IP addresses for security reasons. They could be used
        to help fighting Denial of Service (DoS) attacks. They could be used for A/B marketing
        testing, or they could be used with authenticated DNS servers to identify different classes
        of users for marketing purpose, forensic purpose, or service level purpose, etc.<a href="#section-1-10" class="pilcrow">¶</a></p>
<p id="section-1-11">IPREF allows development of new, specialized protocols by providing interoperation with
        existing IP networks. Because IPREF does not require negotiations of any sort and it does
        not depend on any time domain, it is suitable for developing a range of specialized
        network protocols for special requirements networks such as space networks, IoT networks,
        high security financial or military networks, etc.<a href="#section-1-11" class="pilcrow">¶</a></p>
<div id="requirements">
<section id="section-1.1">
        <h3 id="name-requirements-language">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
          "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT
          RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be
          interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span>
          <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they appear in
          all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-1.2">
        <h3 id="name-ipref-terminology">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-ipref-terminology" class="section-name selfRef">IPREF Terminology</a>
        </h3>
<p id="section-1.2-1">IPREF - short name referring to the technology described in this document, pronounced I-P-REF<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2"><em>third</em> network - network connecting communicating private networks, e.g.: the Internet<a href="#section-1.2-2" class="pilcrow">¶</a></p>
<p id="section-1.2-3"><em>encoding</em> network - network representing hosts on peer private networks<a href="#section-1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<section id="section-2">
      <h2 id="name-ipref-operations-framework">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-ipref-operations-framework" class="section-name selfRef">IPREF Operations Framework</a>
      </h2>
<p id="section-2-1">IPREF traverses different address spaces in the same protocol domain as well as across
        protocol domains. IPREF uses references to IP addresses rather than actual addresses. The
        references are provided with context addresses that identify the different address spaces.
        A combination of a context address and a reference forms an IPREF address. IPREF addresses
        are transformed to native addresses of the local network when injecting packets to that
        network. Conversely, native addresses of the local network are transformed to IPREF
        addresses when leaving the network. The transformations are performed by specialized nodes,
        called IPREF gateways, designed for this purpose. IPREF gateways transfer packets over a
        <em>third</em> network to other IPREF gateways for the purpose of traversing different
        address spaces. Typically, the <em>third</em> network is the public Internet. In case of
        protocol domain traversal, IPREF gateways perform necessary payload repackaging.<a href="#section-2-1" class="pilcrow">¶</a></p>
<section id="section-2.1">
        <h3 id="name-ipref-references">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-ipref-references" class="section-name selfRef">IPREF References</a>
        </h3>
<p id="section-2.1-1">An IPREF reference is an unsigned integer 16 octets in size. Values 0-255 are reserved. Of the
          reserved values, only one is defined. The value of 0 indicates a null reference, i.e. a reference
          which is not subject to mapping and which should be discarded instead.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">The registry of reserved reference values should be vested with IANA. For now, these values are
          listed here until a suitable request to establish such registry is made with IANA.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3">References are unsigned integers meaningful only in the context of the local address
          space. Local administrators may divide their values into fields for any purpose deemed
          useful. For example, the fields may reflect different sources of allocations, or provide
          extra security bits, or provide load balancing options, or provide A/B address ranges
          etc. The definition of these fields, their values, and their use are fully under local
          administration control. The peers are unaware of these fields and treat the references as
          single opaque values.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2">
        <h3 id="name-ipref-addresses">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-ipref-addresses" class="section-name selfRef">IPREF Addresses</a>
        </h3>
<p id="section-2.2-1">An IPREF address is a combination of a layer 3 network address and a reference carried in the
          same packet. In the notation, a plus sign '+' separates the two components. For example:
          198.51.100.11+700 or 2001:db8::abc:11+700.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">The references are used in conjunction with native IP addresses from the <em>third</em>
          network. These are typically addresses of gateway interfaces where the packets arrive at
          or where they are being sent from. These addresses provide the context indicating which
          address space the references pertain to. A combination of such native IP address and the
          reference is called an IPREF address,
          <a href="#ipref-address" class="auto internal xref">Figure 1</a>.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<span id="name-ipref-address"></span><div id="ipref-address">
<figure id="figure-1">
          <div id="section-2.2-3.1">
            <div class="alignLeft art-ascii-art art-text artwork" id="section-2.2-3.1.1">
<pre>
         ┌───────────────────┬───────────────────┐
         │    IP address     │    reference      │
         └───────────────────┴───────────────────┘
            198.51.100.11+700
            2001:db8::abc:11+700
</pre><a href="#section-2.2-3.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-ipref-address" class="selfRef">IPREF address</a>
          </figcaption></figure>
</div>
<p id="section-2.2-4">In the notation, a plus sign '+' is used to separate context addresses from references.
          In packet exchanges, there are source IPREF addresses and a destination IPREF addresses,
          thus a pair of references. The destination references are allocated by the administrators
          of the destination networks while the source references are allocated by the administrators
          of the source networks. There are no negotiations. Each peer defines their own references
          and accepts peer references as opaque values.<a href="#section-2.2-4" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3">
        <h3 id="name-embedding-references-in-ip-">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-embedding-references-in-ip-" class="section-name selfRef">Embedding References in IP Packets</a>
        </h3>
<p id="section-2.3-1">References are network layer entities and the most natural place for embedding them
          would be a network layer headers, such as IPv4 options or IPv6 extension headers.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">Unfortunately, many Internet Service Providers drop options and extension headers for
           various reasons. Even if they don't, routers tend to put them on a slow processing
           path resulting in poor performance. For that reason, the most reliable way to embed
           references is to place them in the payload. One common technique to accomplish this is
           tunneling where references could be placed in the payload of the packet being tunneled.<a href="#section-2.3-2" class="pilcrow">¶</a></p>
<section id="section-2.3.1">
          <h4 id="name-ipv4-option">
<a href="#section-2.3.1" class="section-number selfRef">2.3.1. </a><a href="#name-ipv4-option" class="section-name selfRef">IPv4 Option</a>
          </h4>
<p id="section-2.3.1-1">With IPv4, references may be embedded in an IPv4 header option <span>[<a href="#RFC791" class="cite xref">RFC791</a>]</span>.
             It would be a new option type. It would contain an octet with option type and option
             number, an octet with length, and two octets reserved for possible future use while
             padding to four octet boundary. The source and destination references would then follow.<a href="#section-2.3.1-1" class="pilcrow">¶</a></p>
<p id="section-2.3.1-2">A new option number would be registered with IANA. Until then, experimental option, 30,
             could be used. A separate document should describe it in detail.<a href="#section-2.3.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.2">
          <h4 id="name-ipv6-extension-header">
<a href="#section-2.3.2" class="section-number selfRef">2.3.2. </a><a href="#name-ipv6-extension-header" class="section-name selfRef">IPv6 Extension Header</a>
          </h4>
<p id="section-2.3.2-1">With IPv6, references may be embedded in an IPv6 extension header <span>[<a href="#RFC8200" class="cite xref">RFC8200</a>]</span>.
             It would be a new header type. It would contain an octet with next header type value,
             an octet with length, and two octets reserved for possible future use. This would be
             followed by four octets of padding to 8 octet boundary. Padding octets would not be
             intended for any future use. The source and destination references would then follow.<a href="#section-2.3.2-1" class="pilcrow">¶</a></p>
<p id="section-2.3.2-2">A new protocol type would be registered with IANA. Until then, experimental protocol,
             254, could be used. A separate document should describe it in detail.<a href="#section-2.3.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.3.3">
          <h4 id="name-udp-tunnel">
<a href="#section-2.3.3" class="section-number selfRef">2.3.3. </a><a href="#name-udp-tunnel" class="section-name selfRef">UDP Tunnel</a>
          </h4>
<p id="section-2.3.3-1">Placing references in a UDP tunnel works for both IPv4 and IPv6. In both cases, the
             references are embedded in the form of respective options or extension headers. In
             addition, a tunnel encapsulation record is added. The order of items is as follows:<a href="#section-2.3.3-1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty">
<li class="compact ulEmpty" id="section-2.3.3-2.1">UDP header<a href="#section-2.3.3-2.1" class="pilcrow">¶</a>
</li>
            <li class="compact ulEmpty" id="section-2.3.3-2.2">Tunnel encapsulation record<a href="#section-2.3.3-2.2" class="pilcrow">¶</a>
</li>
            <li class="compact ulEmpty" id="section-2.3.3-2.3">IPREF option<a href="#section-2.3.3-2.3" class="pilcrow">¶</a>
</li>
            <li class="compact ulEmpty" id="section-2.3.3-2.4">Packet payload<a href="#section-2.3.3-2.4" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-2.3.3-3">The encapsulation record would consist of four octets. First octet would contain the
             value of TTL copied from the original IP header. The second octet would contain protocol
             number copied from the original IPv4 header or next header value form an IPv6 extension
             header. The third octet would report number of hops detected for incoming packets. The
             fourth octet would be reserved for possible future use while padding to 4 octet boundary.
             The IPREF option would follow in the format matching respective IP protocol, IPv4 or IPv6.<a href="#section-2.3.3-3" class="pilcrow">¶</a></p>
<p id="section-2.3.3-4">The tunnel would operate at port 1045. This value would be registered with IANA. A
             separate document should describe the tunnel in detail.<a href="#section-2.3.3-4" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.4">
        <h3 id="name-traversing-address-spaces-i">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-traversing-address-spaces-i" class="section-name selfRef">Traversing Address Spaces in the Same Protocol Domain</a>
        </h3>
<p id="section-2.4-1"><a href="#private-networks-same-protocol" class="auto internal xref">Figure 2</a> depicts how two local networks communicate
          with one another. Local network A has two standard hosts A5, A7, and a gateway GWA. The
          gateway connects to the <em>third</em> network, the Internet. Local network B has hosts
          B4, B6, and a gateway GWB. The gateway connects to the same <em>third</em> network as
          gateway GWA. Only the gateways are aware of, and implement, IPREF processing. The hosts
          on both local networks, as well as any hosts or routers on the <em>third</em> network are
          standard network devices, unaware of IPREF. For simplicity, the examples shows the case
          of IPv4 running on all three networks. The IP addresses on local networks may overlap but
          for simplicity are shown as distinct. Further, for ease of following the example, addresses
          related to local network A are odd while addresses related to local network B are even.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<p id="section-2.4-2">Hosts on local network A communicate with hosts on other local networks, such as local
          network B, without knowing IP addresses on the peer networks or even without knowing
          network protocols employed by the peer networks. An <em>encoding</em> network is used in
          lieu of the peer addresses which are in form of IPREF addresses. The peer hosts appear
          as if they were hosted on the <em>encoding</em> network. This is a compatibility feature.
          It is possible to avoid such mapping at the cost of making local hosts IPREF aware. That
          case is not described here as it is dramatically simpler to use <em>encoding</em>
          networks and leave existing hosts as-is, without any modifications.<a href="#section-2.4-2" class="pilcrow">¶</a></p>
<span id="name-private-networks-in-the-sam"></span><div id="private-networks-same-protocol">
<figure id="figure-2">
          <div id="section-2.4-3.1">
            <div class="alignLeft art-ascii-art art-text artwork" id="section-2.4-3.1.1">
<pre>

             ╲                   ╲  Encoding Network B: 10.192.0.0/10
                                       Local Network B: 172.18.2.0/24
               ╲                   ╲
                                                             ┌──────┐
                 ╲                   ╲                  ┃ .66│      │
                                    ┏━━━━━━━┓           ┠────┤ host │
                   ╲  198.51.100.22 ┃ IPREF ┃.2         ┃    │  B6  │
                                  ╭─┨ g-way ┠───────────┨    └──────┘
┌──────┐             ╲            ╎ ┃  GWB  ┃           ┃
│      │.75 ┃                     ╎ ┗━━━━━━━┛           ┃
│ host ├────┨          ╲                   ╲            ┃    ┌──────┐
│  A5  │    ┃               Third Network               ┃ .64│      │
└──────┘    ┃            ╲                   ╲          ┠────┤ host │
            ┃           ┏━━━━━━━┓ ╎                     ┃    │  B4  │
            ┃        .1 ┃ IPREF ┃ ╎            ╲             └──────┘
┌──────┐    ┠───────────┨ g-way ┠─╯
│      │.77 ┃           ┃  GWA  ┃ 198.51.100.11  ╲
│ host ├────┨           ┗━━━━━━━┛
│  A7  │    ┃                  ╲                   ╲
└──────┘
                                 ╲                   ╲
Local Network A: 172.17.1.0/24
Encoding Network A: 10.128.0.0/10  ╲                   ╲

</pre><a href="#section-2.4-3.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-private-networks-in-the-sam" class="selfRef">private networks in the same protocol domain</a>
          </figcaption></figure>
</div>
<p id="section-2.4-4">Let's assume host A5 wants to send a packet to host B4 and receive a response. Prior to the packet
          exchange, an administrator from local network B informs an administrator of local network A that host
          B can be reached at an IPREF address 198.151.100.22+400. Local administrator enters that information
          on gateway GWA which in turn allocates an <em>encoded</em> address of 10.128.0.40 to represent host B.
          This information is further passed to host A5 so that it can send packets to host B by using 10.128.0.40
          as the destination.<a href="#section-2.4-4" class="pilcrow">¶</a></p>
<p id="section-2.4-5">In step (1) host A5 places its own address as source, 172.17.1.75 and the provided address of host B 10.128.0.40
          as destination. As the packet traverses the network, both source and destination addresses will be rewritten.
          It is illustrated in <a href="#address-rewriting" class="auto internal xref">Figure 3</a>. In step (2), the packet arrives at gateway GWA. The gateway
          realizes the destination is an <em>encoded</em> address. It finds that the address corresponds to an IPREF address
          198.51.100.22+400. It places this IPREF address in the packet as the new destination address. It also finds that
          the source address 172.17.1.75 does not correspond to any IPREF address so it allocates one through some algorithm,
          perhaps randomly, as 198.51.100.11+500. It places this IPREF address in the packet as the new source address. It then
          sends the packet into the <em>third</em> network. This is the common network, the Internet, that both local networks
          A and B connect to. In step (3) the packet arrives at gateway GWB. The gateway recognizes the destination IPREF address
          as representation of the internal host's B address 172.18.2.64. It places this address in the packet as new destination
          address. The gateway does not recognize the source IPREF address so it allocates an <em>encoded</em> address for it
          10.192.0.70. It places this address in the packet as the new source address. It, then, sends the packet to the local
          host B4. In step (4), local host B4 receives the packet and recognizes the destination address as its own. It consumes
          the packet and processes it according to the payload.<a href="#section-2.4-5" class="pilcrow">¶</a></p>
<span id="name-address-rewriting"></span><div id="address-rewriting">
<figure id="figure-3">
          <div id="section-2.4-6.1">
            <div class="alignLeft art-ascii-art art-text artwork" id="section-2.4-6.1.1">
<pre>
  Host B4 has IPREF address: 198.51.100.22+400
          encoded at GWA as: 10.128.0.40

  Host A5 is allocated IPREF address: 198.51.100.11+500
                   encoded at GWB as: 10.192.0.70

  Sending a packet from A5 to B4 and receiving a response back at A5:

       ┌───────────────────┬───────────────────┬─────────┐
1 A5:  │    172.17.1.75    │    10.128.0.40    │ payload │
       └───────────────────┴───────────────────┴─────────┘
       ┌───────────────────┬───────────────────┬─────────┐
2 GWA: │ 198.51.100.11+500 │ 198.51.100.22+400 │ payload │
       └───────────────────┴───────────────────┴─────────┘
                  ┌───────────────────┬───────────────────┬─────────┐
3            GWB: │    10.192.0.70    │    172.18.2.64    │ payload │
                  └───────────────────┴───────────────────┴─────────┘
                  ┌───────────────────┬───────────────────┬─────────┐
4            B4:  │    10.192.0.70    │    172.18.2.64    │ payload │
                  └───────────────────┴───────────────────┴─────────┘

                  ┌───────────────────┬───────────────────┬─────────┐
5            B4:  │    172.18.2.64    │    10.192.0.70    │ payload │
                  └───────────────────┴───────────────────┴─────────┘
                  ┌───────────────────┬───────────────────┬─────────┐
6            GWB: │ 198.51.100.22+400 │ 198.51.100.11+500 │ payload │
                  └───────────────────┴───────────────────┴─────────┘
       ┌───────────────────┬───────────────────┬─────────┐
7 GWA: │    10.128.0.40    │    172.17.1.75    │ payload │
       └───────────────────┴───────────────────┴─────────┘
       ┌───────────────────┬───────────────────┬─────────┐
8 A5:  │    10.128.0.40    │    172.17.1.75    │ payload │
       └───────────────────┴───────────────────┴─────────┘
</pre><a href="#section-2.4-6.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-address-rewriting" class="selfRef">address rewriting</a>
          </figcaption></figure>
</div>
<p id="section-2.4-7">In step (5), host B4 sends a response back to host A5. It reverses source and destination addresses and sends a
          packet to gateway GWB. In step (6), the packet arrives at gateway GWB. The gateway recognizes the destination address
          as an <em>encoded</em> address previously created to represent IPREF address 198.51.100.11+500. It places this IPREF
          address in the packet as the new destination address. The gateway also recognizes the source address as corresponding
          to a preset IPREF address 198.51.100.22+400. It places this IPREF address as the new source address. It then sends
          the packet to the <em>third</em> network. In step (7), the packet arrives at gateway GWA. The gateway recognizes the
          destination IPREF address as corresponding to the local host A5 172.17.1.75. It places this address in the packet
          as the new destination address. It also recognizes the source IPREF address as one represented by an <em>encoded</em>
          address 10.128.0.40. It places that address in the packet as the new source address. It then sends the packet to the
          local host A5. in step (8), local host A5 recognizes the destination address 172.17.1.75 as its own and consumes
          the packet for processing. This concludes packet exchange.<a href="#section-2.4-7" class="pilcrow">¶</a></p>
<p id="section-2.4-8">In subsequent packet exchanges, all necessary mappings have been established. The gateways perform simple lookups
          without the need to make any additional allocations.<a href="#section-2.4-8" class="pilcrow">¶</a></p>
<p id="section-2.4-9">In general case, networks may have overlapping addresses, they may have several local subnets, they may have more
          than one gateway to the <em>third</em> network. They may also run different network protocols. For example
          one private network may run IPv4 while its peer may run IPv6. The communicating networks do not need to know their
          peers' actual IP addresses or network protocols. The references are the stand ins representing those addresses in
          their native network protocol domains. The references are interpreted independently by both communicating networks.
          In the example above, network B allocates reference '400' to represent host B4. At network B, that reference is
          interpreted as 172.18.2.64 whereas that same reference is interpreted as 10.128.0.4 at network A. Neither network
          knows, or is concerned with, how the references are interpreted outside of their own administrative domains. In cases
          where interpretation involves changing network protocols, the local gateway must run dual stacks and perform proper
          repackaging of the payload.<a href="#section-2.4-9" class="pilcrow">¶</a></p>
</section>
<section id="section-2.5">
        <h3 id="name-traversing-address-spaces-a">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-traversing-address-spaces-a" class="section-name selfRef">Traversing Address Spaces Across Protocol Domains</a>
        </h3>
<p id="section-2.5-1">If address spaces reside in different protocol domains, then the gateways have an
          additional responsibility to repackage packets into proper protocol frames. Other
          than that, addresses are rewritten in the same manner.<a href="#section-2.5-1" class="pilcrow">¶</a></p>
<p id="section-2.5-2"><a href="#private-networks-different-protocols" class="auto internal xref">Figure 4</a> depicts two local networks, one
          is an IPv4 network and the other is an IPv6 network. The <em>third</em> network runs
          IPv6. The IPv6 local network might employ globally routable addresses which may or may
          not be globally reachable, depending on filtering. From the IPREF perspective it makes
          no difference. Processing works the same way.<a href="#section-2.5-2" class="pilcrow">¶</a></p>
<span id="name-private-networks-in-differe"></span><div id="private-networks-different-protocols">
<figure id="figure-4">
          <div id="section-2.5-3.1">
            <div class="alignLeft art-ascii-art art-text artwork" id="section-2.5-3.1.1">
<pre>

           \     DNS:  B2  AA  2001:db8:bb::2 + 4286

             ╲                   ╲  Encoding Network B: fdee:eeee::/64
                                       Local Network B: 2001:db8:bb:2::/64
               ╲                   ╲
                                                             ┌──────┐
                 ╲                   ╲                  ┃ :46│      │
                                    ┏━━━━━━━┓           ┠────┤ host │
                   ╲ 2001:db8:bb::2 ┃ IPREF ┃:2         ┃    │  B8  │
                                  ╭─┨ g-way ┠───────────┨    └──────┘
┌──────┐             ╲            ╎ ┃  GWB  ┃           ┃
│      │.75 ┃                     ╎ ┗━━━━━━━┛           ┃
│ host ├────┨          ╲                   ╲            ┃    ┌──────┐
│  A5  │    ┃               Third Network               ┃ :28│      │
└──────┘    ┃            ╲                   ╲          ┠────┤ host │
            ┃           ┏━━━━━━━┓ ╎                     ┃    │  B2  │
            ┃        .1 ┃ IPREF ┃ ╎            ╲             └──────┘
┌──────┐    ┠───────────┨ g-way ┠─╯
│      │.77 ┃           ┃  GWA  ┃ 2001:db8:aa::1 ╲
│ host ├────┨           ┗━━━━━━━┛
│  A7  │    ┃                  ╲                   ╲
└──────┘
                                 ╲                   ╲
Local Network A: 172.17.1.0/24
Encoding Network A: 10.128.0.0/10  ╲                   ╲

</pre><a href="#section-2.5-3.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-private-networks-in-differe" class="selfRef">private networks in different protocol domains</a>
          </figcaption></figure>
</div>
<p id="section-2.5-4">Let's assume host A7 wants to communicate with host B2. The IPREF address of B2 can be
          obtain from DNS as 2001:db8:bb::2 + 4286. Local resolver realizes it's an IPREF address
          and asks local mapper to allocate an encoded address for it. Let's assume, the encoded
          address is 10.128.0.214. The addresses are rewritten as below. The first address is
          the source and the second address is the destination:<a href="#section-2.5-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.5-5">
          <li id="section-2.5-5.1">at A7:  |  172.17.1.77  |  10.254.0.214  |  payload  |<a href="#section-2.5-5.1" class="pilcrow">¶</a>
</li>
          <li id="section-2.5-5.2">at GWA: |  2001:db8:aa::1 + 7935  |  2001:db8:bb::2 + 4286  |  payload  |<a href="#section-2.5-5.2" class="pilcrow">¶</a>
</li>
          <li id="section-2.5-5.3">at GWB: |  fdee:eeee::3b9e  |  2001:db8:bb:2::28  |  payload  |<a href="#section-2.5-5.3" class="pilcrow">¶</a>
</li>
          <li id="section-2.5-5.4">at B2:  |  fdee:eeee::3b9e  |  2001:db8:bb:2::28  |  payload  |<a href="#section-2.5-5.4" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-2.5-6">Explanation. In step 1, A7 places its own address as the source. The destination is
          obtained via DNS with local resolver returning the encoded address of B2 as 10.254.0.214
          in lieu of the IPREF address 2001:db8:bb::2 + 4286. In step 2, GWA first recognizes
          that it has to convert the IPv4 packet to an IPv6 packet. It then deals with addresses
          in their respective protocol domains. It does not recognize the source IPv4 address
          so it allocates an IPREF address for it with an IPv6 native portion as 2001:db8:aa::1 + 7935.
          It finds the destination address 10.254.0.14 as corresponding to an IPREF address of
          2001:db8:bb::2 + 4286 that already has an IPv6 native portion so it can place it
          as destination without further conversions. In step 3, GWB does not recognize the
          source IPREF address, so  it allocates an encoded address for it fdee:eeee::3b9e.
          It recognizes the destination address as corresponding to the address of the local
          host b2 and places its local IP address of 2001:db8:bb:2::28. In step 4, local host
          recognizes the destination address as its own and consumes the packet.<a href="#section-2.5-6" class="pilcrow">¶</a></p>
</section>
<section id="section-2.6">
        <h3 id="name-delegating-references">
<a href="#section-2.6" class="section-number selfRef">2.6. </a><a href="#name-delegating-references" class="section-name selfRef">Delegating References</a>
        </h3>
<p id="section-2.6-1">Many organizations maintain large private networks with complex topologies managed by
          many administrators responsible for different parts of the network. In some cases,
          traffic from one internal network must go through another internal network, managed
          by a different administrator, before reaching the Internet. This creates a case, where
          an internal network is effectively nested inside another internal network.<a href="#section-2.6-1" class="pilcrow">¶</a></p>
<p id="section-2.6-2">In <a href="#nested-networks" class="auto internal xref">Figure 5</a>, gateway GWB connects network B 172.18.2.0/24 directly
          to the Internet. In contrast, network C 172.19.9.0/24 does not connect to the Internet
          directly. Traffic from network C must go through network B to reach the Internet. In terms of
          managing references, the administrator of network B can only allocate references to hosts
          on its own network. Anything destined to network C would be passed to gateway GWC unchanged.
          Network C must employ its own IPREF reference management and processing if it wants to
          support IPREF addressing.<a href="#section-2.6-2" class="pilcrow">¶</a></p>
<span id="name-nested-private-networks"></span><div id="nested-networks">
<figure id="figure-5">
          <div id="section-2.6-3.1">
            <div class="alignLeft art-ascii-art art-text artwork" id="section-2.6-3.1.1">
<pre>

             |  Encoding Network B: 10.192.0.0/10
                Local Network B: 172.18.2.0/24
             |
                                   ┌──────┐
               ╲              ┃ .66│      │
              ┏━━━━━━━┓       ┠────┤ host │
198.51.100.22 ┃ IPREF ┃.2     ┃    │  B6  │
            ╭─┨ g-way ┠───────┨    └──────┘
            ╎ ┃  GWB  ┃       ┃
            ╎ ┗━━━━━━━┛       ┃    ┌──────┐
                     ╲        ┃ .64│      │
      Third Network           ┠────┤ host │
       (Internet)     |       ┃    │  B4  │
                              ┃    └──────┘
                      |       ┃             . ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─
                              ┃           /
                      |       ┃          /         ┃    ┌──────┐
                              ┃    ┏━━━━━━━┓       ┃ .39│      │
                      |       ┃  .3┃ IPREF ┃.9     ┠────┤ host │
                              ┠────┨ g-way ┠───────┨    │  C3  │
                      |       ┃    ┃  GWC  ┃       ┃    └──────┘
                              ┃    ┗━━━━━━━┛       ┃
                      |             /
                                   /  Local Network C: 172.19.9.0/24
                      |           |   Encoding Network C: 10.254.0/12

</pre><a href="#section-2.6-3.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-nested-private-networks" class="selfRef">nested private networks</a>
          </figcaption></figure>
</div>
<p id="section-2.6-4">Nested networks pose no issues in terms of traversing address spaces but they have an
          impact on visibility of services published via DNS in form of IPREF addresses. There are
          two cases. In one case, there are no services published via DNS on any host on the nested
          network. In the other case, there is at least one host that publishes services advertised
          via DNS.<a href="#section-2.6-4" class="pilcrow">¶</a></p>
<section id="section-2.6.1">
          <h4 id="name-no-services-published-via-d">
<a href="#section-2.6.1" class="section-number selfRef">2.6.1. </a><a href="#name-no-services-published-via-d" class="section-name selfRef">No Services Published via DNS</a>
          </h4>
<p id="section-2.6.1-1">Let's first consider a case where a nested network does not publish any services via
            DNS. Hosts on this network can still reach services published in form of IPREF
            addresses elsewhere. For example, let's say host C3 wants to reach host A5 from a
            previous example above. In that case, the addresses would be translated as listed
            below. The first address is the source, and the second address is the destination:<a href="#section-2.6.1-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.6.1-2">
            <li id="section-2.6.1-2.1">at C3:  |  172.19.9.39  |  10.254.0.45  |  payload  |<a href="#section-2.6.1-2.1" class="pilcrow">¶</a>
</li>
            <li id="section-2.6.1-2.2">at GWC: |  172.18.2.3 + 794  |  198.51.100.11 + 537  |  payload  |<a href="#section-2.6.1-2.2" class="pilcrow">¶</a>
</li>
            <li id="section-2.6.1-2.3">at GWB: |  198.51.100.22 + 486  |  198.51.100.11 + 537  |  payload  |<a href="#section-2.6.1-2.3" class="pilcrow">¶</a>
</li>
            <li id="section-2.6.1-2.4">at GWA: |  10.128.0.82  |  172.17.1.75  |  payload  |<a href="#section-2.6.1-2.4" class="pilcrow">¶</a>
</li>
            <li id="section-2.6.1-2.5">at A5:  |  10.128.0.82  |  172.17.1.75  |  payload  |<a href="#section-2.6.1-2.5" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-2.6.1-3">Explanations and assumptions to the sequence above. In step 1, C3 uses its own internal
            address as source. The destination is assumed to be provided by network A in form of
            an IPREF address of 198.51.100.11 + 537. That IPREF address is encoded on network C as
            10.254.0.45. The encoding would be done by the GWC mapper upon learning A5's IPREF
            address (either manually or via DNS). In step 2, GWC does not recognize source address
            172.19.9.39, so it allocates an IPREF address to it 172.18.2.3 + 794. The native portion
            of the IPREF address is the outer address on the gateway as usual. It then looks up the
            encoded address of the destination as corresponding to 198.51.100.11 + 537. In step 3,
            GWB does not recognize the source IPREF address, so it allocates its own IPREF address
            as 198.51.100.22 + 486. The destination IPREF address remains unchanged. In step 4, GWA
            does not recognize source IPREF address, so it encodes it as 10.128.0.82. It recognizes
            the destination IPREF address as one representing local host A5 172.17.1.5. In step 5,
            destination host A5 recognizes the destination as its own and consumes the packet.<a href="#section-2.6.1-3" class="pilcrow">¶</a></p>
<p id="section-2.6.1-4">There is one additional step in this sequence as compared to an earlier example. GWB
            performs additional IPREF mapping on a source that is already an IPREF address. Indeed,
            IPREF may perform several steps of that kind depending on the level of nesting of
            private networks. In theory, there is no limit to it. In practice, hop count determines
            how deeply this can go.<a href="#section-2.6.1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-2.6.2">
          <h4 id="name-services-potentially-publis">
<a href="#section-2.6.2" class="section-number selfRef">2.6.2. </a><a href="#name-services-potentially-publis" class="section-name selfRef">Services Potentially Published via DNS</a>
          </h4>
<p id="section-2.6.2-1">If there were any services to be published via DNS in form of IPREF addresses on
            network C, then GWC cannot use its outer IP address as the context portion of an IPREF
            address because that address is not visible on the Internet. This is strictly DNS
            publishing issue. Packets would reach relevant hosts regardless (because GWB would
            re-translate to an Internet visible context address) but at a cost of a complicated
            DNS configuration that would need to be maintained in two places and kept in sync.
            This would be an impractical solution.<a href="#section-2.6.2-1" class="pilcrow">¶</a></p>
<p id="section-2.6.2-2">A better approach is delegation. The gateway that directly connects to the Internet
            would delegate some of the references from its pool to nested gateways. That way nested
            gateways could allocate IPREF addresses with Internet visible context addresses. This
            is only needed if there are any services hosted on the nested networks intended for
            publishing in DNS. The gateway that delegates its references, GWB in the example, knows
            which gateways the references were delegated to and therefore it can forward incoming
            packets accordingly.<a href="#section-2.6.2-2" class="pilcrow">¶</a></p>
<p id="section-2.6.2-3">Let's assume network C publishes a website on host C3. Let's also assume that GWB delegated
            references 6000 thru 8000 to gateway GWC. Now, gateway GWC allocates IPREF addresses with
            native portion equal to GWB's outer address and with references from the delegated range.
            Let's say it allocated IPREF address 198.51.100.22 + 6789 to the website hosted on C3. Now,
            host A7 can reach that website with addresses undergoing the following translations:<a href="#section-2.6.2-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.6.2-4">
            <li id="section-2.6.2-4.1">at A7:  |  172.17.1.77  |  10.128.0.217  |  payload  |<a href="#section-2.6.2-4.1" class="pilcrow">¶</a>
</li>
            <li id="section-2.6.2-4.2">at GWA: |  198.51.100.11 + 591  |  198.51.100.22 + 6789  |  payload  |<a href="#section-2.6.2-4.2" class="pilcrow">¶</a>
</li>
            <li id="section-2.6.2-4.3">at GWB: |  198.51.100.11 + 591  |  172.18.2.3 + 6789  |  payload  |<a href="#section-2.6.2-4.3" class="pilcrow">¶</a>
</li>
            <li id="section-2.6.2-4.4">at GWC: |  10.254.7.221  |  172.19.9.39  |  payload  |<a href="#section-2.6.2-4.4" class="pilcrow">¶</a>
</li>
            <li id="section-2.6.2-4.5">at C3:  |  10.254.7.221  |  172.19.9.33  |  payload  |<a href="#section-2.6.2-4.5" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-2.6.2-5">Explanation. Host A7 wants to reach a website hosted at C3. In step 1, A7 uses its own
            address as source. It uses an encoded address of 10.128.0.217 as destination. That encoded
            address was allocated by gateway GWA upon learning C3's IPREF address. In step 2, GWA
            does not recognize A7's address so it allocates an IPREF address 198.51.100.11 + 591
            to represent 172.17.1.77. In step 3, GWB recognizes the destination IPREF address as
            one from the range delegated to gateway GWC. In that case, it simply forwards it to GWC. 
            Since IPREF is strictly about addressing, it does not forward packets by itself. Rather,
            it relies on the underlying native network protocol to do so. It rewrites the destination
            IPREF address so that the native portion points to GWC. The local network protocol may
            now forward the packet to GWC. In step 4, GWC recognizes the destination IPREF address
            as its own. I also recognizes the reference as delegated from GWB, therefore it replaces
            the native portion of the IPREF address with the outer address of the gateway where the
            references were deleted from, i.e. GWB. It then looks up that IPREF address as corresponding
            to host C3. It allocates an encoding address to the source IPREF address as 10.254.7.221
            since this is the first time it sees that source IPREF address. In step 5, C3 recognizes
            destination address as its own and consumes the packet.<a href="#section-2.6.2-5" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-2.7">
        <h3 id="name-name-resolution-support">
<a href="#section-2.7" class="section-number selfRef">2.7. </a><a href="#name-name-resolution-support" class="section-name selfRef">Name Resolution Support</a>
        </h3>
<p id="section-2.7-1">IPREF gateways provide mapping support for name resolution services such as DNS. When
          resolving queries on behalf of local hosts, all returned IPREF addresses must be mapped
          to native addresses of the local network protocol. These are the addresses on the
          <em>encoding</em> network. How is this accomplished may be viewed as a matter of local
          implementation but there may be a need to settle on a standard way of communicating
          with the IPREF gateways to allow compatibility with different resolvers. In that case,
          a separate document should describe such mechanism.<a href="#section-2.7-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3">
      <h2 id="name-dns-with-ipref">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-dns-with-ipref" class="section-name selfRef">DNS with IPREF</a>
      </h2>
<p id="section-3-1">Similarly to standard IP, IPREF can operate with or without DNS. IPREF addresses may be
        entered and distributed manually. For example, an /etc/hosts file could be used for the
        purpose. Such use makes sense in certain cases. Especially on private networks, the
        practice of using literal addresses is common even if local DNS names are allocated to
        the hosts.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">IPREF can also take full advantage of DNS <span>[<a href="#RFC1035" class="cite xref">RFC1035</a>]</span>.  IPREF addresses are
        publishable. When resolving names that render IPREF addresses, local resolvers must obtain
        translation into <em>encoded</em> addresses for standard hosts on local networks. Mapping
        to <em>encoded</em> addresses is typically made by IPREF gateways and presented back to
        resolvers which pass them to the querying hosts. In addition, IPREF gateways must be aware
        of all local hosts whose IPREF addresses are published through DNS. This is illustrated
        in <a href="#dns-with-ipref" class="auto internal xref">Figure 6</a>.<a href="#section-3-2" class="pilcrow">¶</a></p>
<span id="name-dns-with-ipref-2"></span><div id="dns-with-ipref">
<figure id="figure-6">
        <div id="section-3-3.1">
          <div class="alignLeft art-ascii-art art-text artwork" id="section-3-3.1.1">
<pre>

                    ╲
                             ┏━━━━━━━━┓
                      ╲      ┃ public ┃
                             ┃  DNS   ┃ &lt;╌╌ public DNS queries
  ┌──────┐              ╲    ┃ server ┃
  │      │.75 ┃              ┗━━┯━━━━━┛
  │ host ├────┨           ╲     ╎
  │  A5  │    ┃                 ╎
  └──────┘    ┃             ╲   ╎
              ┃            ┏━━━━┷━━┓
              ┃         .1 ┃ IPREF ┃
  ┌──────┐    ┠────────────┨ g-way ┠─
  │      │.77 ┃            ┃  GWA  ┃
  │ host ├────┨            ┗━━┯━━━━┛
  │  A7  │    ┃               ╎   ╲
  └──────┘                    ╎
                              ╎     ╲
                       ┏━━━━━━┷━━━┓
                       ┃  local   ┃   ╲
local DNS queries  &lt;╌╌ ┃   DNS    ┃ &lt;╌╌ DNS query responses
                       ┃ resolver ┃     ╲
   Local Network A     ┗━━━━━━━━━━┛
                                          ╲

</pre><a href="#section-3-3.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-dns-with-ipref-2" class="selfRef">DNS with IPREF</a>
        </figcaption></figure>
</div>
<p id="section-3-4">Local hosts A5 and A7 resolve DNS names via local resolvers. The resolvers query DNS
        servers on their behalf. Queries may return native IPv4 or IPv6 addresses, or it may return
        IPREF addresses. If the native addresses match local network protocol, the resolvers simply
        return them unchanged, dropping otherwise. In case of IPREF addresses, the resolvers obtain
        a mapping to a native address on an <em>encoded</em> network from related IPREF gateways.
        The gateways may allocate mappings on the fly if missing. The resulting <em>encoded</em> IP
        addresses are then returned to the querying hosts.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">If any hosts on local networks advertise services via DNS using IPREF addresses, the
        related IPREF gateways must be made aware of it. The gateways must know which hosts have
        been made available externally and what IPREF addresses have been assigned to them. This
        is typically a semi-static configuration which remains stable for long periods of time. The
        gateways may query those DNS servers for information periodically or some other mechanism
        may be employed to convey that information.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6">To illustrate, in the example shown in <a href="#address-rewriting" class="auto internal xref">Figure 3</a>, the IPREF
        address of host B4 may be published via a public DNS server maintained by administrators
        of local network B. Host A5 may obtain the address of host B4 by querying DNS via a local
        resolver. The resolver would query the DNS servers, recognize the response as an IPREF
        address and consult related IPREF gateway for proper mapping to an <em>encoded</em> IP
        address. That IP address would then be returned to host A5 which in turn would use it as
        the destination IP address.<a href="#section-3-6" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-dns-records">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-dns-records" class="section-name selfRef">DNS Records</a>
        </h3>
<p id="section-3.1-1">IPREF addresses are unlike well known IPv4 addresses or IPv6 addresses. These addresses
          consist of two components which must be considered as a single address entity. It is not
          possibly to separate references from their related <em>third</em> network IP addresses.
          For that reason, there is a need for a new resource record type. The new record type is
          tentatively called AA. This record type has not been registered yet. Until such time, a
          TXT record may be used instead. The TXT record simply holds a textual representation of
          an AA record.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2"> Here are some examples of what the records might look like:<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<div class="lang-dns-rr sourcecode" id="section-3.1-3">
<pre>
    Host-B4     AA      198.51.100.22 + 400
    Host-A5     AA      net-A + 500
    Host-A5     AA      2001:db8::abc:11 + 700
    Host-A5     TXT     "AA net-A + 500"
</pre><a href="#section-3.1-3" class="pilcrow">¶</a>
</div>
<p id="section-3.1-4">The IP portion may be provided numerically or as a domain name. The format for the reference
          would allow unsigned decimal integers as well as unsigned hex integers. Other formats may be
          defined as well.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">The definition of the new resource record, its use, notation, and registration with IANA should
          be described in a separate document.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2">
        <h3 id="name-local-network-resolver">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-local-network-resolver" class="section-name selfRef">Local Network Resolver</a>
        </h3>
<p id="section-3.2-1">Local network resolver must provide capability to replace IPREF addresses with IP addresses from
         <em>encoded</em> network in consultation with IPREF mappers. It's not clear if the details may be left
         to implementations or whether some sort of an exchange protocol needs to be defined. If so, a
         separate document would describe it.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3">
        <h3 id="name-dns-agent">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-dns-agent" class="section-name selfRef">DNS Agent</a>
        </h3>
<p id="section-3.3-1">A DNS Agent is a component of IPREF mappers that detects if any local hosts are advertised
          as reachable via IPREF addresses. There is a number of existing mechanisms to accomplish
          this. There is probably no need to define another one.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4">
      <h2 id="name-related-technologies">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-related-technologies" class="section-name selfRef">Related Technologies</a>
      </h2>
<p id="section-4-1">IPREF works well with related technologies. It does not create conflicts and it does
        not attempt to step on their functionality.<a href="#section-4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-2.1">IPv4 - IPREF does not replace IPv4, it is an optional add-on to enhance IPv4
             capabilities in the area of address rewriting. It relies on IPv4 in all other
             functions of a network protocol.<a href="#section-4-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.2">IPv6 - IPREF does not replace IPv6, it is an optional add-on to enhance IPv6
             capabilities in the area of address rewriting. It relies on IPv6 in all other
             functions of a network protocol.<a href="#section-4-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.3">NAT - IPREF is an address rewriting technology but operates differently than NAT. It
             operates exclusively at the network layer. It does not reach to upper layer protocols
             or lower layer protocols. For example, there is no manipulation of TCP/UDP ports. All
             layer 4 ports are carried transparently as-is. IPREF does not conflict with NAT. In a
             common configuration, a NAT gateway connects to the <em>third</em> network without
             any changes. IPREF may operate in parallel to NAT on the same gateway, or it may operate
             on another gateway within the local network 'behind NAT'.<a href="#section-4-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.4">VPN - IPREF deals mostly with addressing. It does not perform typical functions of
             a VPN and it does not replace it. It behaves differently. A typical VPN makes hosts
             of a local network appear as if members of some other local network. Hosts subjected
             to a VPN are managed by that other private networks. This involves a substantial level
             of trust between the two private networks. IPREF does not do any of that. Hosts
             reachable through IPREF are firmly in their respective private networks and remain
             managed by their respective administrators. There may be cases where IPREF may be
             deemed sufficient for a particular purpose but in general IPREF is not a substitute
             for a VPN. IPREF does not conflict with VPNs. A VPN might use IPREF to establish
             a VPN connection.<a href="#section-4-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-2.5">Firewall - IPREF is not a firewall. While allocation or lack of allocation of references
             to local hosts has the effect of blocking or allowing access to them, blocking policy is
             best vested with a firewall. IPREF mappers deal with address rewriting, they are not packet
             filters. There is no conflict between firewalls and IPREF. Firewalls might need to be made
             aware of IPREF to be effective in their mission.<a href="#section-4-2.5" class="pilcrow">¶</a>
</li>
      </ul>
</section>
<div id="IANA">
<section id="section-5">
      <h2 id="name-iana-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-5-1">This memo includes no requests to IANA.<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="Security">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">This document should not affect the security of the Internet. Documents describing particular
        pieces of IPREF might. Proper security consideration statements would be included in those
        documents.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-7">
      <h2 id="name-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-7.1">
        <h3 id="name-normative-references">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC791">[RFC791]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Internet Protocol"</span>, <span class="seriesInfo">RFC 791</span>, <time datetime="1981-09" class="refDate">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc791">https://www.rfc-editor.org/info/rfc791</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1035">[RFC1035]</dt>
        <dd>
<span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - implementation and specification"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1035</span>, <span class="seriesInfo">DOI 10.17487/RFC1035</span>, <time datetime="1987-11" class="refDate">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1035">https://www.rfc-editor.org/info/rfc1035</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8200">[RFC8200]</dt>
        <dd>
<span class="refAuthor">Deering, S.</span> and <span class="refAuthor">R. Hinden</span>, <span class="refTitle">"Internet Protocol, Version 6 (IPv6) Specification"</span>, <span class="seriesInfo">STD 86</span>, <span class="seriesInfo">RFC 8200</span>, <span class="seriesInfo">DOI 10.17487/RFC8200</span>, <time datetime="2017-07" class="refDate">July 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8200">https://www.rfc-editor.org/info/rfc8200</a>&gt;</span>. </dd>
<dd class="break"></dd></dl>
</section>
<section id="section-7.2">
        <h3 id="name-informative-references">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Waldemar Augustyn (<span class="role">editor</span>)</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:waldemar@wdmsys.com" class="email">waldemar@wdmsys.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
